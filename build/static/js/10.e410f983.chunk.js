(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[10],{1088:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(44),c=a(0),o=a.n(c),l=a(1067),i=a.n(l),s=a(187),m=a.n(s),u=a(263),p=a(962),d=a(953),f=a(943),b=a(13),h=a(9),v=a(983),g=a(95),x=a.n(g),j=a(183),E=a(55),y=a.n(E);function O(e){var t=Object(h.b)(),a=Object(c.useState)(!1),r=Object(n.a)(a,2),l=r[0],i=r[1],s=function(){var a=Object(u.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i(!0),a.next=4,y.a.post("".concat("http://www.polepath.com/api","/users/changestagename"),{stageName:n.stageName});case 4:200===a.sent.status&&(t(b.J(n.stageName)),i(!1),e.close()),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),409===a.t0.response.status&&t(b.F({message:a.t0.response.data.message,autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}();return o.a.createElement(c.Fragment,null,o.a.createElement(f.a,{className:"flex flex-col align-center",open:e.open,onClose:e.close,"aria-labelledby":"form-dialog-title"},o.a.createElement(v.a,{id:"form-dialog-title"},"Change your stage name"),o.a.createElement(x.a,{onValidSubmit:s,className:"px-16 pb-16 flex flex-col justify-center w-full items-center"},o.a.createElement(j.c,{className:"my-16",type:"text",name:"stageName",label:"Your new stagename",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,value:""}),o.a.createElement(d.a,{className:"flex justify-end"},o.a.createElement(p.a,{onClick:e.close,variant:"contained",color:"secondary"},"Cancel"),o.a.createElement(p.a,{type:"submit",variant:"contained",color:"secondary",disabled:l},"Submit")))))}var w=a(56),N=a(188),k=a(162),C=a(970),S=a(944),I=a(181),M=a(942),H=a(940),L=a(1065),Y=a.n(L),z=(a(1066),a(991)),W=a(16),D=Object(S.a)((function(e){var t;return{cropContainer:{width:"100%",height:"400px",padding:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},dialogPaper:(t={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minHeight:"85vh",maxHeight:"85vh",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(r.a)(t,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(r.a)(t,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(r.a)(t,e.breakpoints.up("lg"),{minWidth:"30vw"}),t)}})),R=function(e){var t=Object(h.b)(),a=D(),r=Object(c.useState)(null),l=Object(n.a)(r,2),i=l[0],s=l[1],g=Object(c.useState)(!1),x=Object(n.a)(g,2),j=x[0],E=x[1],O=Object(c.useRef)(null);Object(c.useEffect)((function(){if(j)var e=new Y.a(O.current,{viewMode:2,zoomable:!1,scalable:!1,aspectRatio:1,highlight:!1,background:!1,center:!1,guides:!1,crop:function(){e.getCroppedCanvas().toBlob((function(e){s(e)}))}})}),[e.src,j]),Object(c.useEffect)((function(){E(!0)}),[]);var w=function(){var a=Object(u.a)(m.a.mark((function a(){var n,r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(n=new FormData).append("image",i),s(null),a.prev=3,a.next=6,y.a.post("".concat("http://www.polepath.com/api","/users/changeavatar"),n);case 6:200===(r=a.sent).status&&(t(Object(b.H)(r.data.photoURL)),e.close()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),t(W.D({message:a.t0.response.data.message,variant:"error"}));case 13:case"end":return a.stop()}}),a,null,[[3,10]])})));return function(){return a.apply(this,arguments)}}();return o.a.createElement(f.a,{open:e.open,onClose:e.close},o.a.createElement(d.a,{className:a.dialogPaper},o.a.createElement(v.a,{className:"text-center"},"Crop your photo"),o.a.createElement(d.a,{className:a.cropContainer},o.a.createElement("img",{src:e.src,ref:O,alt:"Crop Area",className:"max-h-full max-w-full block"})),o.a.createElement(z.a,{className:"flex justify-end"},o.a.createElement(p.a,{color:"primary",disabled:!i,type:"button",onClick:w},"Save"),o.a.createElement(p.a,{color:"primary",type:"button",onClick:e.close},"Cancel"))))},B=a(182),F=a(3),T=Object(S.a)((function(e){return{counter:{color:e.palette.primary.main}}}));var U=o.a.memo((function(e){var t=T();return o.a.createElement(B.a,{className:"w-full rounded-8 shadow-none border-1 mx-8"},o.a.createElement("div",{className:"text-center pt-6 pb-6"},o.a.createElement(I.a,{className:Object(F.default)(t.counter,"text-72 leading-none ")},e.count)),o.a.createElement("div",{className:"flex items-center px-16 h-52 border-t-1"},o.a.createElement(I.a,{className:"text-15 flex w-full",color:"textSecondary"},o.a.createElement("span",{className:"truncate"},e.label))))})),P=a(947),A=a(959),J=a(265),q=a.n(J),G=a(90),V=Object(S.a)((function(e){return{activityContainer:{padding:0,margin:0,minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),_=function(e){var t=V(e),a=Object(G.g)(),r=Object(c.useState)(null),l=Object(n.a)(r,2),i=l[0],s=l[1],m=Object(c.useState)(!1),u=Object(n.a)(m,2),p=u[0],f=u[1],b=Object(c.useState)(!0),h=Object(n.a)(b,2),v=h[0],g=h[1];Object(c.useEffect)((function(){var e=y.a.CancelToken.source();return y.a.get("".concat("http://www.polepath.com/api","/users/history"),{cancelToken:e.token}).then((function(e){var t=e.data.activity.reverse();s(t),g(!1)})).catch((function(e){f(!0)})),function(){e.cancel("Component got unmounted")}}),[]);var x=o.a.createElement(I.a,{variant:"h6",className:"mb-16"},"Couldn't load latest activity :(");return o.a.createElement("div",{className:"flex flex-col justify-center items-center mx-8 mt-20 border-1 p-0 rounded-8 "},o.a.createElement(I.a,{variant:"h6",className:"mb-16"},"Latest Activity"),o.a.createElement(d.a,{className:t.activityContainer},v?o.a.createElement(P.a,null):p?x:i.map((function(e,t){var n;switch(e.event){case"photo":n="You added a new  ".concat(e.polemoveId.name," ").concat(e.event,".");break;case"mastered":n="Congratulations! You mastered the ".concat(e.polemoveId.name," move.");break;case"started":n="You started to learn the ".concat(e.polemoveId.name," move. Good luck!");break;default:return!0}return o.a.createElement("div",{key:e._id,className:"flex justify-center mb-8 w-full flex-col border-0 bg-gray-100 cursor-pointer",onClick:function(){return function(e){var t="/moves/polemoves/".concat(e);a.push(t)}(e.polemoveId)}},o.a.createElement(I.a,{className:"mb-16 pl-16",variant:"subtitle1"},n)," ",o.a.createElement(I.a,{variant:"caption",display:"block",gutterBottom:!0,className:"text-right pr-8"},q()(e.createdAt).format("dddd, MMMM Do YYYY, h:mm:ss a")),t!==i.length-1&&o.a.createElement(A.a,{light:!0}))}))))},K=Object(S.a)((function(e){return{layoutHeader:Object(r.a)({height:320,minHeight:320},e.breakpoints.down("md"),{height:240,minHeight:240}),avatar:{cursor:"pointer"},input:{width:"95%",marginTop:"1em",paddingBottom:"1em"},alert:{width:"100%",position:"absolute",zIndex:10,top:0,left:0,color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"},snackbar:{zIndex:15},card:{marginTop:"30px"}}}));t.default=Object(h.a)(null,(function(e){return Object(w.c)({showMessage:b.F,hideMessage:b.o},e)}))((function(e){var t=K(),a=Object(c.useState)(!1),r=Object(n.a)(a,2),l=r[0],s=r[1],m=Object(c.useState)(null),u=Object(n.a)(m,2),p=u[0],d=u[1],f=Object(c.useState)(0),b=Object(n.a)(f,2),v=b[0],g=b[1],x=Object(c.useState)(null),j=Object(n.a)(x,2),E=j[0],y=j[1],w=Object(h.c)((function(e){return e.auth.user})),S=Object(h.c)((function(e){return e.moves.progress}));return Object(c.useEffect)((function(){if(S){var e=S.data.filter((function(e){return!0===e.mastered}));g(e.length)}}),[S]),o.a.createElement(k.a,{classes:{header:t.layoutHeader,toolbar:"px-16 sm:px-24"},header:o.a.createElement(c.Fragment,null,o.a.createElement("div",{className:"p-24 flex flex-1 flex-col items-center justify-center md:flex-row md:items-end"},o.a.createElement("div",{className:"flex flex-1 flex-col items-center justify-center md:flex-row md:items-center md:justify-start"},o.a.createElement(N.a,{animation:"transition.expandIn",delay:300},o.a.createElement(C.a,{className:"mb-16 w-96 h-96 ".concat(t.avatar),src:w.photoURL,onClick:function(e){d(e.currentTarget)}})),o.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(I.a,{className:"md:mx-24",variant:"h4",color:"inherit"},w.stageName,o.a.createElement(i.a,{className:"ml-8 cursor-pointer",fontSize:"small",onClick:function(){return s(!0)}})))),p&&o.a.createElement(H.a,{open:Boolean(p),anchorEl:p,onClose:function(){return d(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},o.a.createElement(M.a,{role:"button",component:"label"},"Update Profile Picture ",o.a.createElement("input",{type:"file",onChange:function(e){e.target.files&&y(URL.createObjectURL(e.target.files[0]))},style:{display:"none"}}))))),content:o.a.createElement("div",{className:"p-16 sm:p-24"},o.a.createElement(O,{action:"confirm",open:l,close:function(){return s(!1)}}),o.a.createElement("div",{className:"flex justify-between "},o.a.createElement(U,{count:v,label:"Moves Mastered"}),o.a.createElement(U,{count:S.data.length,label:"Moves Started"})),o.a.createElement(_,null)," ",E&&o.a.createElement(R,{open:Boolean(E),src:E,close:function(){return y(null)}}))})}))}}]);