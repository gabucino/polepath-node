(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[10],{1100:function(e,t,a){"use strict";a.r(t);var n=a(19),l=a(165),r=a(0),c=a.n(r),o=a(978),i=a(155),s=a(976),m=a(966),u=a(343),d=a(8),p=a(342),f=(a(1021),a(30)),b=a(190),h=a.n(b),g=a(270),v=a(1022),E=a.n(v),j=a(956),x=a(957),y=(a(1029),a(954)),O=a(902),N=a(969),w=a(62),C=a(972),k=a(964),I=a(965),S=a(900),R=a(1003),P=a.n(R),B=a(908),F=a(977),_=a(1030),D=a(3),T=a(1031),M=a.n(T),W=a(996),U=a.n(W),A=a(1032),L=a.n(A),H=a(1033),z=a.n(H),Y=Object(x.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},media:{height:0,paddingTop:"56.25%",marginTop:"30"},cardHeader:{display:"flex",justifyContent:"center"}}})),G=c.a.forwardRef((function(e,t){return c.a.createElement(B.a,Object.assign({direction:"up",ref:t},e))}));function J(e){var t=Y(),a=c.a.useState(!1),l=Object(n.a)(a,2),o=(l[0],l[1],Object(r.useState)(null)),s=Object(n.a)(o,2),u=s[0],p=s[1],f=Object(d.c)((function(e){return e.movesReducer.move}));Object(r.useEffect)((function(){p(e.startIndex)}),[]);var b=function(){e.changeStartIndex(u),e.close()};return c.a.createElement("div",null,c.a.createElement(j.a,{fullScreen:!0,open:e.open,onClose:b,TransitionComponent:G},c.a.createElement(k.a,{className:t.appBar},c.a.createElement(I.a,null,c.a.createElement(S.a,{edge:"start",color:"inherit",onClick:b,"aria-label":"close"},c.a.createElement(P.a,null)),c.a.createElement(i.a,{variant:"h6",className:t.title},"Gallery"))),null!==u&&c.a.createElement(F.a,{className:"text-center"},c.a.createElement(_.a,{title:"".concat(f.generalData.name," Progress")}),c.a.createElement(C.a,null),c.a.createElement(i.a,{variant:"h6",className:Object(D.default)(t.title,"flex justify-between py-16 mx-48")},e.images[u].description,c.a.createElement("div",null," ",c.a.createElement(U.a,null),c.a.createElement(M.a,{onClick:function(){return e.deletePhoto(u)}}))),c.a.createElement(m.a,{className:"mt-8"}," ",c.a.createElement(L.a,{onClick:function(){p(0===u?e.images.length-1:function(e){return e-1})}}),c.a.createElement(z.a,{onClick:function(){u===e.images.length-1?p(0):p((function(e){return e+1}))}})),c.a.createElement(m.a,null,c.a.createElement("img",{TransitionComponent:G,className:"p-32",src:e.images[u].original,alt:e.images[u].description})))))}var V=a(120),q=Object(x.a)((function(e){return{thumbnail:{height:"80px",width:"30%"},currentPhoto:{maxWidth:"100%",maxHeight:"100%"},gallery:{display:"flex",justifyContent:"center",height:"350px"},listItem:{cursor:"pointer","&:hover":{background:"transparent"}},loader:{margin:"0 20px"}}})),K=function(e){var t=Object(d.b)(),a=q(e),l=Object(r.useRef)(null),o=Object(d.c)((function(e){return e.movesReducer.move.userMoveData.photos})),i=Object(r.useState)(!1),s=Object(n.a)(i,2),m=s[0],u=s[1],p=Object(r.useState)(!1),b=Object(n.a)(p,2),v=b[0],x=b[1],C=Object(r.useState)(!1),k=Object(n.a)(C,2),I=(k[0],k[1]),S=Object(r.useState)([]),R=Object(n.a)(S,2),P=R[0],B=R[1],F=Object(r.useState)(0),_=Object(n.a)(F,2),D=_[0],T=_[1],M=function(){var e=Object(g.a)(h.a.mark((function e(a){var n,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P[a]._id,l=P.filter((function(e){return e._id!==n})),B(l),x(!1),e.next=6,t(w.s(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();j.a,a.dialog,y.a,O.a,N.a,O.a,a.listItem,N.a;return Object(r.useEffect)((function(){if(I(!0),u(!0),o.length>0){var e=o.map((function(e){return{original:e.path,thumbnail:e.path,originalClass:a.currentPhoto,thumbnailClass:a.thumbnail,description:e.date,_id:e._id}}));B(e)}u(!1)}),[]),c.a.createElement(r.Fragment,null,v?c.a.createElement(J,{changeStartIndex:function(e){T(e)},images:P,startIndex:l.current.state.currentIndex,deletePhoto:M,open:v,close:function(){return x(!1)}}):"",m?c.a.createElement("div",{className:"flex justify-center px-20"},c.a.createElement(V.a,{className:a.loader,text:"Uploading your photo..."})):c.a.createElement(E.a,Object(f.a)({showFullscreenButton:!1,showPlayButton:!1,startIndex:D,ref:l,className:a.gallery,onClick:function(){x(!0)},items:P,slideOnThumbnailOver:!0},"className","mb-25")))},Q=a(185),X=a(1034),Z=a.n(X),$=a(96),ee=a.n($),te=a(979),ae=a(961),ne=a(983),le=a(191),re=Object(x.a)((function(e){var t;return{dialogPaper:(t={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(f.a)(t,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(f.a)(t,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(f.a)(t,e.breakpoints.up("lg"),{minWidth:"30vw"}),t),placeholder:{width:"100%",height:"320px",padding:0,display:"flex",justifyContent:"center",alignItems:"center"},button:{color:e.palette.primary}}})),ce=function(e){var t=Object(d.b)(),a=re(),l=Object(r.useState)(""),o=Object(n.a)(l,2),u=o[0],p=(o[1],Object(r.useState)(!0)),f=Object(n.a)(p,2),b=f[0],v=f[1],E=Object(r.useState)(new Date),x=Object(n.a)(E,2),y=x[0],O=x[1],N=Object(r.useState)(!1),k=Object(n.a)(N,2),I=(k[0],k[1]),S=function(){var a=Object(g.a)(h.a.mark((function a(n,l){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(r=new FormData).append("image",e.blob),r.append("polemoveId",e.polemoveId),r.append("date",y),r.append("privacy","public"),r.append("category","photo"),I(!0),a.next=9,t(w.m(r));case 9:v(!0),O(new Date),I(!1),e.close();case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return c.a.createElement(j.a,{open:e.open,onClose:e.close},c.a.createElement(m.a,{className:a.dialogPaper},c.a.createElement(r.Fragment,null,c.a.createElement(te.a,{className:"text-center"},"Upload new photo"),c.a.createElement(C.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),c.a.createElement(m.a,{className:Object(D.default)(a.placeholder,!u&&"border-dashed border-2 border-gray-200")},c.a.createElement("img",{src:e.preview,alt:"Preview Image",className:"max-h-full max-w-full block"})),c.a.createElement(ee.a,{onValidSubmit:S,className:"flex flex-col justify-center w-full"}," ",c.a.createElement(i.a,{className:"my-8",variant:"h5",component:"h5"},"Was this photo taken today?"),c.a.createElement(le.a,{name:"date",className:"z-1"},c.a.createElement(ae.a,{onClick:function(){return v(!0)},value:"today",control:c.a.createElement(ne.a,{checked:b,color:"primary"}),label:"Today"}),c.a.createElement(ae.a,{onClick:function(){return v(!1)},value:"earlier",control:c.a.createElement(ne.a,{checked:!b,color:"primary"}),label:"Earlier"})),b?"":c.a.createElement(Z.a,{className:"z-10 p-8 mb-8 border-solid border-1 border-gray-600",selected:y,onChange:function(e){return O(e.getTime())}})," ",c.a.createElement(s.a,{color:"primary",type:"submit"},"Save"),c.a.createElement(s.a,{color:"primary",type:"button",onClick:e.close},"Cancel")))))},oe=Object(p.a)("movesReducer",u.a)((function(e){var t=Object(d.c)((function(e){return e.movesReducer.move.userMoveData})),a=Object(r.useState)(null),l=Object(n.a)(a,2),u=l[0],p=l[1],f=Object(r.useState)(""),b=Object(n.a)(f,2),h=b[0],g=b[1],v=Object(r.useState)(!1),E=Object(n.a)(v,2),j=E[0],x=(E[1],Object(r.useState)(!1)),y=Object(n.a)(x,2),O=y[0],N=y[1],w=Object(r.useRef)(null);return c.a.createElement(Q.a,{className:"lg:w-1/2 mb-16"},c.a.createElement(o.a,{className:"flex justify-center flex-col align-center p-16"},c.a.createElement(i.a,{className:"underline flex justify-start mb-16",variant:"h5",component:"h5"},"Your progress"),t.photos.length>0&&!j?c.a.createElement(K,{photos:t.photos,polemoveId:e.polemoveId}):"",j&&c.a.createElement("div",{className:"flex justify-center px-20"},c.a.createElement(V.a,{text:"Uploading your photo..."})),c.a.createElement("input",{type:"file",ref:w,hidden:!0,onChange:function(e){if(e.target.files){var t=e.target.files[0];p(URL.createObjectURL(e.target.files[0])),g(t),N(!0)}}}),c.a.createElement(m.a,{className:"pt-10 px-0"},c.a.createElement(s.a,{type:"button",className:"w-full",variant:"contained",color:"primary",onClick:function(){w.current.click()}},"Upload photo")),u&&c.a.createElement(ce,{open:O,preview:u,close:function(){return p(null),g(null),void N(!1)},blob:h,polemoveId:e.polemoveId})))})),ie=a(980);function se(e){return c.a.createElement("div",null,c.a.createElement(j.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},e.children,c.a.createElement(ie.a,null,c.a.createElement(s.a,{onClick:e.onClose,color:"primary"},"Cancel"),c.a.createElement(s.a,{onClick:e.confirmHandler,color:"primary",autoFocus:!0},"confirm"===e.action?"Confirm":"Refresh"))))}var me=a(975),ue=a(1077),de=a.n(ue),pe=Object(x.a)((function(e){return{deleteNoteButton:{padding:"0.5rem"}}})),fe=function(e){var t=Object(d.b)(),a=Object(d.c)((function(e){return e.movesReducer.move.userMoveData.notes})),n=pe(e),l=Object(r.useRef)(null);return c.a.createElement(Q.a,{className:"flex flex-col mb-16 items-start justify-between p-16 lg:w-1/2 lg:flex-1 "},c.a.createElement(i.a,{className:"underline mt-8",variant:"h5",component:"h5"},"Your Notes"),a?c.a.createElement(y.a,{className:"flex flex-col flex-1 justify-start items-start"},a.map((function(t){return c.a.createElement(O.a,{variant:"outlined",className:"text-base",key:t._id},c.a.createElement(me.a,null,c.a.createElement(de.a,null)),t.text,c.a.createElement("button",{className:n.deleteNoteButton,id:t._id},c.a.createElement(P.a,{id:t._id,onClick:function(){return e.toggleModal(t._id,"deleteNote")}})))}))):null,c.a.createElement(ee.a,{onValidSubmit:function(a,n){var l={polemoveId:e.polemoveId,note:a.note};t(w.l(l)),n()},ref:l,className:"flex flex-col justify-center w-full"},c.a.createElement(i.a,{className:"mt-8 mb-8",variant:"h6",component:"h6"},"New note"),c.a.createElement(le.c,{className:"mb-16",type:"text",name:"note",label:"Type your note here",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,rows:4,value:""}),c.a.createElement(s.a,{type:"submit",variant:"contained",color:"secondary"},"Add note")))},be=Object(x.a)((function(e){return{selectedButton:{backgroundColor:e.palette.primary.main,color:"#FFF"}}})),he=function(e){Object(d.b)();var t=be(e);return c.a.createElement(m.a,{className:"flex justify-between my-16 p-0"},c.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){return e.toggleModal(null,"resetProgress")},className:void 0===e.mastered||null===e.mastered?Object(D.default)(t.selectedButton,"flex-1 p-4 w-1/3"):Object(D.default)(t.progessButton,"flex-1 p-4 w-1/3")},"ONE DAY"),c.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleUserProgressChange(!1)},className:!1===e.mastered?Object(D.default)(t.selectedButton,"flex-1 p-4 w-1/3"):Object(D.default)(t.progessButton,"flex-1 p-4  w-1/3")},"IN PROGRESS"),c.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleUserProgressChange(!0)},name:"mastered",className:e.mastered?Object(D.default)(t.selectedButton,"flex-1 p-4, w-1/3"):Object(D.default)(t.progessButton,"flex-1 p-4 , w-1/3")},"MASTERED"))},ge=a(177),ve=a(952),Ee=a(47),je=a(24),xe=a(1078),ye=a(1091),Oe=Object(x.a)((function(e){return{stepLabel:{cursor:"pointer!important"},successFab:{background:"".concat(ge.a[500],"!important"),color:"white!important"},noborder:{border:"0"},selectedButton:{backgroundColor:e.palette.primary.main,color:"#FFF"},deleteNoteButton:{padding:"0.5rem"},dropzone:{border:"1px solid #121212",padding:"15px"},spinner:{minHeight:"80px",minWidth:"80px"},spinnerContainer:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},photoPlaceholder:{display:"flex",justifyContent:"center",alignItems:"center",flex:"1",margin:"16px",height:"80%"}}}));t.default=Object(p.a)("movesReducer",u.a)((function(e){var t=Object(d.b)(),a=Object(d.c)((function(e){return e.movesReducer.move.generalData})),o=Object(d.c)((function(e){return e.movesReducer.move.userMoveData})),s=(Object(d.c)((function(e){return e.auth.polemoves})),Object(r.useState)(!1)),u=Object(n.a)(s,2),p=u[0],f=u[1],b=Object(r.useState)(null),h=Object(n.a)(b,2),g=h[0],v=h[1],E=Object(r.useState)(null),j=Object(n.a)(E,2),x=j[0],y=j[1],O=Object(r.useState)(!0),N=Object(n.a)(O,2),C=(N[0],N[1]),k=Object(r.useState)({}),I=Object(n.a)(k,2),R=(I[0],I[1],Object(Ee.a)()),P=Oe(e);Object(r.useRef)(null),Object(r.useEffect)((function(){return t(w.u(e.match.params)),function(){t(w.o())}}),[t,e.match.params]),Object(r.useEffect)((function(){a&&C(!1)}),[a]);var B=function(e,t){y(t),null!==e&&v(e),f(!0)},F=function(n){if(n!==e.mastered){var l={polemoveId:a._id,mastered:n};t(w.n(l)),f(!1),y(null)}},_="deleteNote"===x?c.a.createElement(r.Fragment,null,c.a.createElement(te.a,{id:"alert-dialog-title"},"Are you sure you want to delete note?"),c.a.createElement(xe.a,null,c.a.createElement(ye.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))):c.a.createElement(r.Fragment,null,c.a.createElement(te.a,{id:"alert-dialog-title"},"Are you sure you want to reset your progress on ",a&&a.name,"?"),c.a.createElement(xe.a,null,c.a.createElement(ye.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))),T=c.a.createElement(Q.a,{className:Object(D.default)(P.photoPlaceholder,"mb-16 lg:w-1/2")},c.a.createElement(i.a,{variant:"h6"},"This move doesn't have a main photo yet."));return c.a.createElement(l.a,{classes:{content:"flex flex-col flex-auto overflow-hidden",header:"h-72 min-h-72"},header:c.a.createElement("div",{className:"flex flex-1 items-center px-16 lg:px-24"},c.a.createElement(S.a,{to:"/moves/polemoves",component:je.a},c.a.createElement(ve.a,null,"ltr"===R.direction?"arrow_back":"arrow_forward")),a&&c.a.createElement(i.a,{className:"flex-1 text-20 mx-16 lg:text-center"},a.name)),content:a?c.a.createElement("div",{className:"flex flex-col w-full p-16 lg:mt-24 lg:flex-row lg:flex-wrap overflow-scroll"},null===a.extension?T:c.a.createElement(Q.a,{className:"p-24 mb-16 lg:w-1/2"},c.a.createElement("img",{className:"block w-full h-full",alt:a.name,src:"https://polepath.b-cdn.net/mainphotos/".concat(a._id,".").concat(a.extension)})),c.a.createElement(m.a,{className:"lg:w-1/2 mb-16 p-0 flex flex-col justify-between"},c.a.createElement(he,{handleUserProgressChange:F,toggleModal:B,mastered:o?o.mastered:null,polemoveId:e.match.params.polemoveId}),a.otherNames.length?c.a.createElement(i.a,{className:"text-justify mb-16",variant:"body2",component:"p"},c.a.createElement("em",{className:"text-xl"}," ","Also known as:",a&&a.otherNames.map((function(e,t){return t===a.otherNames.length-1?c.a.createElement("span",{key:e}," ",e," "):c.a.createElement("span",{key:e},e,", ")})))):""," ",c.a.createElement(Q.a,{className:"flex-1 p-16  flex justify-center items-center"},c.a.createElement("em",{className:"text-base lg:text-xl"},a.description?a.description:"This move does not have a description yet.")),c.a.createElement(Q.a,{className:"flex-1 p-16  mt-16 flex justify-center items-center"},c.a.createElement("em",{className:"text-base lg:text-xl"},"Public userphotos are coming soon!"))),o&&void 0!==o.mastered?c.a.createElement(oe,{polemoveId:e.match.params.polemoveId,moveName:a.name,photos:o.photos}):null,o&&void 0!==o.mastered?c.a.createElement(fe,{toggleModal:B,polemoveId:e.match.params.polemoveId}):""," ",c.a.createElement(se,{action:"confirm",open:p,onClose:function(){f(!1),y(null)},confirmHandler:"deleteNote"===x?function(){var e={noteId:g,polemoveId:a._id};t(w.r(e)),v(null),f(!1),y(null)}:function(){return F(null)}},_)):c.a.createElement(V.a,null)})}))}}]);