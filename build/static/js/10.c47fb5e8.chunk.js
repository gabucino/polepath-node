(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[10],{1092:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(159),l=a(201),o=a.n(l),c=a(258),s=a(0),i=a.n(s),m=a(1077),u=a(950),d=a(3),p=Object(u.a)((function(e){return{dropzone:{border:"1px dashed #D3D3D3",padding:"15px",marginTop:"15px"}}}));var f=function(e){var t=p(e),a=(Object(s.useCallback)((function(e){e.forEach((function(t){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){a.result},a.readAsDataURL(t),a.addEventListener("load",(function(){console.log(e)}))}))}),[]),Object(m.a)({minSize:0,maxSize:1048576,accept:"image/*",onDrop:function(t){e.preview(t)}})),n=a.isDragActive,r=a.getRootProps,l=a.getInputProps,o=(a.isDragReject,a.acceptedFiles);return a.rejectedFiles,i.a.createElement(s.Fragment,null,i.a.createElement("div",Object.assign({className:Object(d.default)(t.dropzone,"flex flex-1 justify-center flex-col")},r()),i.a.createElement("input",l())," ",i.a.createElement("ul",{className:"list-group mt-2"},o.length>0&&o.map((function(e){return i.a.createElement("li",{className:"list-group-item list-group-item-success",key:e.name},e.name)}))),0===o.length?i.a.createElement("p",null,n?"Drop it like it's hot!":"Click me or drag a file to upload!"):""))},b=a(999),h=a(971),g=a(150),E=a(969),v=a(73),x=a(335),j=a(8),y=a(334),O=a(91),N=a.n(O),w=a(954),C=a(976),k=a(182),I=a(1031),S=a.n(I),R=(a(1019),a(1020)),P=a.n(R),D=a(949),F=(a(1027),a(947)),B=a(895),_=a(962),T=a(965),M=a(957),U=a(958),A=a(893),L=a(997),z=a.n(L),H=a(901),V=a(970),W=a(998),Y=a(1028),q=a.n(Y),G=a(990),J=a.n(G),K=a(1029),Q=a.n(K),X=a(1030),Z=a.n(X),$=a(959),ee=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},media:{height:0,paddingTop:"56.25%",marginTop:"30"},cardHeader:{display:"flex",justifyContent:"center"}}})),te=i.a.forwardRef((function(e,t){return i.a.createElement(H.a,Object.assign({direction:"up",ref:t},e))}));function ae(e){var t=ee(),a=i.a.useState(!1),r=Object(n.a)(a,2),l=(r[0],r[1],Object(s.useState)(null)),o=Object(n.a)(l,2),c=o[0],m=o[1],u=Object(j.c)((function(e){return e.movesReducer.move}));Object(s.useEffect)((function(){m(e.startIndex)}),[]);var p=function(){e.changeStartIndex(c),e.close()};return i.a.createElement("div",null,i.a.createElement(D.a,{fullScreen:!0,open:e.open,onClose:p,TransitionComponent:te},i.a.createElement(M.a,{className:t.appBar},i.a.createElement(U.a,null,i.a.createElement(A.a,{edge:"start",color:"inherit",onClick:p,"aria-label":"close"},i.a.createElement(z.a,null)),i.a.createElement(g.a,{variant:"h6",className:t.title},"Gallery"))),null!==c&&i.a.createElement(V.a,{className:"text-center"},i.a.createElement(W.a,{title:"".concat(u.generalData.name," Progress")}),i.a.createElement(T.a,null),i.a.createElement(g.a,{variant:"h6",className:Object(d.default)(t.title,"flex justify-between py-16 mx-48")},e.images[c].description,i.a.createElement("div",null," ",i.a.createElement(J.a,null),i.a.createElement(q.a,{onClick:function(){return e.deletePhoto(c)}}))),i.a.createElement($.a,{className:"mt-8"}," ",i.a.createElement(Q.a,{onClick:function(){m(0===c?e.images.length-1:function(e){return e-1})}}),i.a.createElement(Z.a,{onClick:function(){c===e.images.length-1?m(0):m((function(e){return e+1}))}})),i.a.createElement($.a,null,i.a.createElement("img",{TransitionComponent:te,className:"p-32",src:e.images[c].original,alt:e.images[c].description})))))}var ne=a(112),re=Object(u.a)((function(e){return{thumbnail:{height:"80px",width:"30%"},currentPhoto:{maxWidth:"100%",maxHeight:"100%"},gallery:{display:"flex",justifyContent:"center",height:"350px"},listItem:{cursor:"pointer","&:hover":{background:"transparent"}},loader:{margin:"0 20px"}}})),le=function(e){var t=Object(j.b)(),a=re(e),r=Object(s.useRef)(null),l=Object(j.c)((function(e){return e.movesReducer.move.userMoveData.photos})),m=Object(s.useState)(!1),u=Object(n.a)(m,2),d=u[0],p=u[1],f=Object(s.useState)(!1),b=Object(n.a)(f,2),h=b[0],g=b[1],E=Object(s.useState)(!1),x=Object(n.a)(E,2),y=(x[0],x[1]),O=Object(s.useState)([]),N=Object(n.a)(O,2),w=N[0],C=N[1],k=Object(s.useState)(0),I=Object(n.a)(k,2),S=I[0],R=I[1],T=function(){var e=Object(c.a)(o.a.mark((function e(a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w[a]._id,r=w.filter((function(e){return e._id!==n})),C(r),g(!1),e.next=6,t(v.q(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i.a.createElement(D.a,{className:a.dialog,onClose:function(){return g(!1)},"aria-labelledby":"simple-dialog-title",open:h},i.a.createElement(F.a,null,i.a.createElement(B.a,null,i.a.createElement(_.a,{className:"p-8",primary:"View"})),i.a.createElement(B.a,{className:a.listItem},i.a.createElement(_.a,{className:"p-8",primary:"Delete",onClick:T}))));return Object(s.useEffect)((function(){if(y(!0),p(!0),l.length>0){var e=l.map((function(e){return{original:e.path,thumbnail:e.path,originalClass:a.currentPhoto,thumbnailClass:a.thumbnail,description:e.date,_id:e._id}}));C(e)}p(!1)}),[]),i.a.createElement(s.Fragment,null,h?i.a.createElement(ae,{changeStartIndex:function(e){R(e)},images:w,startIndex:r.current.state.currentIndex,deletePhoto:T,open:h,close:function(){return g(!1)}}):"",d?i.a.createElement("div",{className:"flex justify-center px-20"},i.a.createElement(ne.a,{className:a.loader,text:"Uploading your photo..."})):i.a.createElement(P.a,{showFullscreenButton:!1,showPlayButton:!1,startIndex:S,ref:r,className:a.gallery,onClick:function(){g(!0)},items:w,slideOnThumbnailOver:!0}))},oe=a(177),ce=Object(y.a)("movesReducer",x.a)((function(e){var t=Object(j.b)(),a=Object(j.c)((function(e){return e.movesReducer.move.userMoveData})),r=Object(s.useState)(""),l=Object(n.a)(r,2),m=l[0],u=l[1],d=Object(s.useState)(""),p=Object(n.a)(d,2),x=p[0],y=p[1],O=Object(s.useState)(!0),I=Object(n.a)(O,2),R=I[0],P=I[1],D=Object(s.useState)(new Date),F=Object(n.a)(D,2),B=F[0],_=F[1],T=Object(s.useState)(!1),M=Object(n.a)(T,2),U=M[0],A=M[1],L=Object(s.useRef)(null),z=function(){var a=Object(c.a)(o.a.mark((function a(n,r){var l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(l=new FormData).append("image",m),l.append("polemoveId",e.polemoveId),l.append("date",B),l.append("category","photo"),l.append("privacy",n.privacy),A(!0),a.next=9,t(v.l(l));case 9:u(""),y(""),P(!0),_(new Date),A(!1);case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return i.a.createElement(oe.a,{className:"lg:w-1/2 mb-16"},i.a.createElement(h.a,{className:"flex justify-center flex-col align-center p-16"},i.a.createElement(g.a,{className:"underline flex justify-start mb-16",variant:"h5",component:"h5"},"Your progress"),a.photos.length>0&&!U?i.a.createElement(le,{photos:a.photos,polemoveId:e.polemoveId}):"",U&&i.a.createElement("div",{className:"flex justify-center px-20"},i.a.createElement(ne.a,{text:"Uploading your photo..."})),x&&!U?i.a.createElement(s.Fragment,null,i.a.createElement(g.a,{className:"text-justify",variant:"body1",component:"p"},"Preview:"),i.a.createElement(b.a,{className:"p-16",component:"img",alt:"Progress Photo",height:"230",image:x,title:"Progress Photo"}),i.a.createElement(N.a,{onValidSubmit:z,ref:L,className:"flex flex-col justify-center w-full"}," ",i.a.createElement(g.a,{className:"my-8",variant:"h5",component:"h5"},"Do you want other people to see this photo?"," "),i.a.createElement(g.a,{className:"text-justify",variant:"body1",component:"p"},"Public photos are visible on your profile and on the ",e.moveName," move page."),i.a.createElement(g.a,{className:"my-8",variant:"h5",component:"h5"},"Was this photo taken today?"),i.a.createElement(k.a,{name:"date",className:"z-1"},i.a.createElement(w.a,{onClick:function(){return P(!0)},value:"today",control:i.a.createElement(C.a,{checked:R,color:"primary"}),label:"Today"}),i.a.createElement(w.a,{onClick:function(){return P(!1)},value:"earlier",control:i.a.createElement(C.a,{checked:!R,color:"primary"}),label:"Earlier"})),R?"":i.a.createElement(S.a,{className:"z-10 p-8 mb-8 border-solid border-1 border-gray-600",selected:B,onChange:function(e){return _(e.getTime())}}),i.a.createElement(E.a,{type:"submit",className:"w-full",variant:"contained",color:"primary"},"Upload photo"))):i.a.createElement("div",{className:"flex flex-col"},i.a.createElement(g.a,{className:"text-justify",variant:"h6",component:"p"},"Upload your photos to track your progress"),i.a.createElement(f,{preview:function(e){u(e[0]);var t=URL.createObjectURL(e[0]);y(t)},text:"Click here to add your first photo",className:"p-16"}))))})),se=a(973);function ie(e){return i.a.createElement("div",null,i.a.createElement(D.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},e.children,i.a.createElement(se.a,null,i.a.createElement(E.a,{onClick:e.onClose,color:"primary"},"Cancel"),i.a.createElement(E.a,{onClick:e.confirmHandler,color:"primary",autoFocus:!0},"confirm"===e.action?"Confirm":"Refresh"))))}var me=a(968),ue=a(1074),de=a.n(ue),pe=Object(u.a)((function(e){return{deleteNoteButton:{padding:"0.5rem"}}})),fe=function(e){var t=Object(j.b)(),a=Object(j.c)((function(e){return e.movesReducer.move.userMoveData.notes})),n=pe(e),r=Object(s.useRef)(null);return i.a.createElement(oe.a,{className:"flex flex-col mb-16 items-start justify-between p-16 lg:w-1/2 lg:flex-1 "},i.a.createElement(g.a,{className:"underline mt-8",variant:"h5",component:"h5"},"Your Notes"),a?i.a.createElement(F.a,{className:"flex flex-col flex-1 justify-start items-start"},a.map((function(t){return i.a.createElement(B.a,{variant:"outlined",className:"text-base",key:t._id},i.a.createElement(me.a,null,i.a.createElement(de.a,null)),t.text,i.a.createElement("button",{className:n.deleteNoteButton,id:t._id},i.a.createElement(z.a,{id:t._id,onClick:function(){return e.toggleModal(t._id,"deleteNote")}})))}))):null,i.a.createElement(N.a,{onValidSubmit:function(a,n){var r={polemoveId:e.polemoveId,note:a.note};t(v.k(r)),n()},ref:r,className:"flex flex-col justify-center w-full"},i.a.createElement(g.a,{className:"mt-8 mb-8",variant:"h6",component:"h6"},"New note"),i.a.createElement(k.c,{className:"mb-16",type:"text",name:"note",label:"Type your note here",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,rows:4,value:""}),i.a.createElement(E.a,{type:"submit",variant:"contained",color:"secondary"},"Add note")))},be=Object(u.a)((function(e){return{selectedButton:{backgroundColor:e.palette.primary.main,color:"#FFF"}}})),he=function(e){Object(j.b)();var t=be(e);return i.a.createElement($.a,{className:"flex justify-between my-16 p-0"},i.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){return e.toggleModal(null,"resetProgress")},className:void 0===e.mastered||null===e.mastered?Object(d.default)(t.selectedButton,"flex-1 p-4 w-1/3"):Object(d.default)(t.progessButton,"flex-1 p-4 w-1/3")},"ONE DAY"),i.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleUserProgressChange(!1)},className:!1===e.mastered?Object(d.default)(t.selectedButton,"flex-1 p-4 w-1/3"):Object(d.default)(t.progessButton,"flex-1 p-4  w-1/3")},"IN PROGRESS"),i.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleUserProgressChange(!0)},name:"mastered",className:e.mastered?Object(d.default)(t.selectedButton,"flex-1 p-4, w-1/3"):Object(d.default)(t.progessButton,"flex-1 p-4 , w-1/3")},"MASTERED"))},ge=a(171),Ee=a(945),ve=a(44),xe=a(26),je=a(1075),ye=a(1087),Oe=a(972),Ne=Object(u.a)((function(e){return{stepLabel:{cursor:"pointer!important"},successFab:{background:"".concat(ge.a[500],"!important"),color:"white!important"},noborder:{border:"0"},selectedButton:{backgroundColor:e.palette.primary.main,color:"#FFF"},deleteNoteButton:{padding:"0.5rem"},dropzone:{border:"1px solid #121212",padding:"15px"},spinner:{minHeight:"80px",minWidth:"80px"},spinnerContainer:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},photoPlaceholder:{display:"flex",justifyContent:"center",alignItems:"center",flex:"1",margin:"16px",height:"80%"}}}));t.default=Object(y.a)("movesReducer",x.a)((function(e){var t=Object(j.b)(),a=Object(j.c)((function(e){return e.movesReducer.move.generalData})),l=Object(j.c)((function(e){return e.movesReducer.move.userMoveData})),o=(Object(j.c)((function(e){return e.auth.polemoves})),Object(s.useState)(!1)),c=Object(n.a)(o,2),m=c[0],u=c[1],p=Object(s.useState)(null),f=Object(n.a)(p,2),b=f[0],h=f[1],E=Object(s.useState)(null),x=Object(n.a)(E,2),y=x[0],O=x[1],N=Object(s.useState)(!0),w=Object(n.a)(N,2),C=(w[0],w[1]),k=Object(s.useState)({}),I=Object(n.a)(k,2),S=(I[0],I[1],Object(ve.a)()),R=Ne(e);Object(s.useRef)(null),Object(s.useEffect)((function(){t(v.s(e.match.params))}),[t,e.match.params]),Object(s.useEffect)((function(){a&&C(!1)}),[a]);var P=function(e,t){O(t),null!==e&&h(e),u(!0)},D=function(n){if(n!==e.mastered){var r={polemoveId:a._id,mastered:n};t(v.m(r)),u(!1),O(null)}},F="deleteNote"===y?i.a.createElement(s.Fragment,null,i.a.createElement(Oe.a,{id:"alert-dialog-title"},"Are you sure you want to delete note?"),i.a.createElement(je.a,null,i.a.createElement(ye.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))):i.a.createElement(s.Fragment,null,i.a.createElement(Oe.a,{id:"alert-dialog-title"},"Are you sure you want to reset your progress on ",a&&a.name,"?"),i.a.createElement(je.a,null,i.a.createElement(ye.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))),B=i.a.createElement(oe.a,{className:Object(d.default)(R.photoPlaceholder,"mb-16 lg:w-1/2")},i.a.createElement(g.a,{variant:"h6"},"This move doesn't have a main photo yet."));return i.a.createElement(r.a,{classes:{content:"flex flex-col flex-auto overflow-hidden",header:"h-72 min-h-72"},header:i.a.createElement("div",{className:"flex flex-1 items-center px-16 lg:px-24"},i.a.createElement(A.a,{onClick:function(){t(v.n())},to:"/moves/polemoves",component:xe.a},i.a.createElement(Ee.a,null,"ltr"===S.direction?"arrow_back":"arrow_forward")),a&&i.a.createElement(g.a,{className:"flex-1 text-20 mx-16 lg:text-center"},a.name)),content:a?i.a.createElement("div",{className:"flex flex-col w-full p-16 lg:mt-24 lg:flex-row lg:flex-wrap overflow-scroll"},null===a.extension?B:i.a.createElement(oe.a,{className:"p-24 mb-16 lg:w-1/2"},i.a.createElement("img",{className:"block w-full h-full",alt:a.name,src:"https://polepath.b-cdn.net/mainphotos/".concat(a._id,".").concat(a.extension)})),i.a.createElement($.a,{className:"lg:w-1/2 mb-16 p-0 flex flex-col justify-between"},i.a.createElement(he,{handleUserProgressChange:D,toggleModal:P,mastered:l?l.mastered:null,polemoveId:e.match.params.polemoveId}),a.otherNames.length?i.a.createElement(g.a,{className:"text-justify mb-16",variant:"body2",component:"p"},i.a.createElement("em",{className:"text-xl"}," ","Also known as:",a&&a.otherNames.map((function(e,t){return t===a.otherNames.length-1?i.a.createElement("span",{key:e}," ",e," "):i.a.createElement("span",{key:e},e,", ")})))):""," ",i.a.createElement(oe.a,{className:"flex-1 p-16  flex justify-center items-center"},i.a.createElement("em",{className:"text-base lg:text-xl"},a.description?a.description:"This move does not have a description yet.")),i.a.createElement(oe.a,{className:"flex-1 p-16  mt-16 flex justify-center items-center"},i.a.createElement("em",{className:"text-base lg:text-xl"},"Public userphotos are coming soon!"))),l&&void 0!==l.mastered?i.a.createElement(ce,{polemoveId:e.match.params.polemoveId,moveName:a.name,photos:l.photos}):null,l&&void 0!==l.mastered?i.a.createElement(fe,{toggleModal:P,polemoveId:e.match.params.polemoveId}):""," ",i.a.createElement(ie,{action:"confirm",open:m,onClose:function(){u(!1),O(null)},confirmHandler:"deleteNote"===y?function(){var e={noteId:b,polemoveId:a._id};t(v.p(e)),h(null),u(!1),O(null)}:function(){return D(null)}},F)):i.a.createElement(ne.a,null)})}))}}]);