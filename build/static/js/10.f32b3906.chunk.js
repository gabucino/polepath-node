(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[10],{1092:function(e,a,t){"use strict";t.r(a);var n=t(21),l=t(44),c=t(0),r=t.n(c),m=t(1073),s=t.n(m),o=t(188),i=t.n(o),u=t(269),d=t(970),p=t(961),f=t(951),b=t(13),E=t(8),v=(t(149),t(974)),x=t(95),h=t.n(x),N=t(189),g=t(55),y=t.n(g);function w(e){var a=Object(E.b)(),t=Object(c.useState)(""),l=Object(n.a)(t,2),m=(l[0],l[1]),s=Object(c.useState)(!1),o=Object(n.a)(s,2),x=o[0],g=o[1],w=function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(!0),t.next=4,y.a.post("".concat("http://www.polepath.com/api","/users/changestagename"),{stageName:n.stageName});case 4:200===t.sent.status&&(a(b.J(n.stageName)),g(!1),e.close()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),409===t.t0.response.status&&(m(t.t0.response.data.message),a(b.F({message:t.t0.response.data.message,autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"})));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(c.Fragment,null,r.a.createElement(f.a,{className:"flex flex-col align-center",open:e.open,onClose:e.close,"aria-labelledby":"form-dialog-title"},r.a.createElement(v.a,{id:"form-dialog-title"},"Change your stage name"),r.a.createElement(h.a,{onValidSubmit:w,className:"px-16 pb-16 flex flex-col justify-center w-full items-center"},r.a.createElement(N.c,{className:"my-16",type:"text",name:"stageName",label:"Your new stagename",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,value:""}),r.a.createElement(p.a,{className:"flex justify-end"},r.a.createElement(d.a,{onClick:e.close,variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(d.a,{type:"submit",variant:"contained",color:"secondary",disabled:x},"Submit")))))}var j=t(56),O=t(208),k=t(164),C=t(980),S=t(952),I=t(154),M=t(343),F=t(959),U=t(972),W=t(973),H=t(947),L=t(897),Y=t(949),z=t(899),B=t(1088),R=t(964),A=t(960);var J=function(){var e=Object(c.useState)(null),a=Object(n.a)(e,2),t=a[0],l=a[1];if(Object(c.useEffect)((function(){y.a.get("/api/profile/about").then((function(e){l(e.data)}))}),[]),!t)return null;var m=t.general,s=t.work,o=t.contact,i=t.groups,u=t.friends;return r.a.createElement("div",{className:"md:flex max-w-2xl"},r.a.createElement("div",{className:"flex flex-col flex-1 md:ltr:pr-32 md:rtl:pl-32"},r.a.createElement(M.a,{enter:{animation:"transition.slideUpBigIn"}},r.a.createElement(U.a,{className:"w-full mb-16"},r.a.createElement(F.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(I.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"General Information"))),r.a.createElement(W.a,null,r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Gender"),r.a.createElement(I.a,null,m.gender)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Birthday"),r.a.createElement(I.a,null,m.birthday)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Locations"),m.locations.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(I.a,null,e),r.a.createElement(H.a,{className:"text-16 mx-4",color:"action"},"location_on"))}))),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"About Me"),r.a.createElement(I.a,null,m.about)))),r.a.createElement(U.a,{className:"w-full mb-16"},r.a.createElement(F.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(I.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Work"))),r.a.createElement(W.a,null,r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Occupation"),r.a.createElement(I.a,null,s.occupation)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Skills"),r.a.createElement(I.a,null,s.skills)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Jobs"),r.a.createElement("table",{className:""},r.a.createElement("tbody",null,s.jobs.map((function(e){return r.a.createElement("tr",{key:e.company},r.a.createElement("td",null,r.a.createElement(I.a,null,e.company)),r.a.createElement("td",{className:"px-16"},r.a.createElement(I.a,{color:"textSecondary"},e.date)))}))))))),r.a.createElement(U.a,{className:"w-full mb-16"},r.a.createElement(F.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(I.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Contact"))),r.a.createElement(W.a,null,r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Address"),r.a.createElement(I.a,null,o.address)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Tel."),o.tel.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(I.a,null,e))}))),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Website"),o.websites.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(I.a,null,e))}))),r.a.createElement("div",{className:"mb-24"},r.a.createElement(I.a,{className:"font-bold mb-4 text-15"},"Emails"),o.emails.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(I.a,null,e))}))))))),r.a.createElement("div",{className:"flex flex-col md:w-320"},r.a.createElement(M.a,{enter:{animation:"transition.slideUpBigIn"}},r.a.createElement(U.a,{className:"w-full mb-16"},r.a.createElement(F.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(I.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Friends"),r.a.createElement(d.a,{className:"normal-case",color:"inherit",size:"small"},"See 454 more"))),r.a.createElement(W.a,{className:"flex flex-wrap p-8"},u.map((function(e){return r.a.createElement("img",{key:e.id,className:"w-64 m-4 rounded-4 block",src:e.avatar,alt:e.name})})))),r.a.createElement(U.a,{className:"w-full mb-16"},r.a.createElement(F.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(I.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Joined Groups"),r.a.createElement(d.a,{className:"normal-case",color:"inherit",size:"small"},"See 6 more"))),r.a.createElement(W.a,{className:"p-0"},r.a.createElement(Y.a,{className:"p-0"},i.map((function(e){return r.a.createElement(z.a,{key:e.id,className:"px-8"},r.a.createElement(C.a,{className:"mx-8",alt:e.name},e.name[0]),r.a.createElement(R.a,{primary:r.a.createElement("div",{className:"flex"},r.a.createElement(I.a,{className:"font-medium",color:"secondary",paragraph:!1},e.name),r.a.createElement(I.a,{className:"mx-4",paragraph:!1},e.category)),secondary:e.members}),r.a.createElement(B.a,null,r.a.createElement(L.a,null,r.a.createElement(H.a,null,"more_vert"))))}))))))))},P=t(1089),T=t(1090),D=t(1091),G=t(966);var _=function(){var e=Object(c.useState)(null),a=Object(n.a)(e,2),t=a[0],l=a[1];return Object(c.useEffect)((function(){y.a.get("/api/profile/photos-videos").then((function(e){l(e.data)}))}),[]),t?r.a.createElement("div",{className:"md:flex max-w-2xl"},r.a.createElement("div",{className:"flex flex-col flex-1 md:ltr:pr-32 md:rtl:pl-32"},r.a.createElement(M.a,{enter:{animation:"transition.slideUpBigIn"}},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"mb-48"},r.a.createElement(G.a,{component:"div",className:"flex items-center px-0 mb-24"},r.a.createElement(I.a,{variant:"h6"},e.name),r.a.createElement(I.a,{className:"mx-16",variant:"subtitle1",color:"textSecondary"},e.info)),r.a.createElement(P.a,{className:"",spacing:8,cols:0},e.media.map((function(e){return r.a.createElement(T.a,{classes:{root:"w-full sm:w-1/2 md:w-1/4",tile:"rounded-8"},key:e.preview},r.a.createElement("img",{src:e.preview,alt:e.title}),r.a.createElement(D.a,{title:e.title,actionIcon:r.a.createElement(L.a,null,r.a.createElement(H.a,{className:"text-white opacity-75"},"info"))}))}))))}))))):null},q=t(184),V=t(3),K=Object(S.a)((function(e){return{counter:{color:e.palette.primary.main}}}));var Q=r.a.memo((function(e){var a=K();return r.a.createElement(q.a,{className:"w-full rounded-8 shadow-none border-1 mx-8"},r.a.createElement("div",{className:"text-center pt-6 pb-6"},r.a.createElement(I.a,{className:Object(V.default)(a.counter,"text-72 leading-none ")},e.count)),r.a.createElement("div",{className:"flex items-center px-16 h-52 border-t-1"},r.a.createElement(I.a,{className:"text-15 flex w-full",color:"textSecondary"},r.a.createElement("span",{className:"truncate"},e.label))))})),X=t(967),Z=t(300),$=t.n(Z),ee=t(90),ae=function(e){var a=Object(ee.g)(),t=Object(c.useState)(null),l=Object(n.a)(t,2),m=l[0],s=l[1];return Object(c.useEffect)((function(){var e=y.a.CancelToken.source();return y.a.get("".concat("http://www.polepath.com/api","/users/history"),{cancelToken:e.token}).then((function(e){s(e.data.activity)})).catch((function(e){console.log(e)})),function(){e.cancel("Component got unmounted")}}),[]),r.a.createElement("div",{className:"flex flex-col justify-center items-center mx-8 mt-20 border-1  rounded-8 "},r.a.createElement(I.a,{variant:"h6",className:"mb-16"},"Latest Activity"),m&&m.map((function(e,t){var n;switch(e.event){case"photo":n="You added a new  ".concat(e.polemoveId.name," ").concat(e.event,".");break;case"mastered":n="Congratulations! You mastered the ".concat(e.polemoveId.name," move.");break;case"started":n="You started to learn the ".concat(e.polemoveId.name," move. Good luck!");break;default:return!0}return r.a.createElement("div",{key:e._id,className:"flex justify-center mb-8 w-full flex-col border-0 bg-gray-100 cursor-pointer",onClick:function(){return function(e){var t="/moves/polemoves/".concat(e);a.push(t)}(e.polemoveId)}},r.a.createElement(I.a,{className:"mb-16 pl-16",variant:"subtitle1"},n)," ",r.a.createElement(I.a,{variant:"caption",display:"block",gutterBottom:!0,className:"text-right pr-8"},$()(e.createdAt).format("dddd, MMMM Do YYYY, h:mm:ss a")),t!==m.length-1&&r.a.createElement(X.a,{light:!0}))})))},te=t(975),ne=t(896),le=t(907),ce=t(1071),re=t.n(ce),me=(t(1072),t(14)),se=Object(S.a)((function(e){return{cropContainer:{width:"100%",height:"400px",padding:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}}})),oe=function(e){var a=Object(E.b)(),t=se(),l=Object(c.useState)(null),m=Object(n.a)(l,2),s=m[0],o=m[1],f=Object(c.useRef)(null);Object(c.useEffect)((function(){if(f.current)var e=new re.a(f.current,{viewMode:2,zoomable:!1,scalable:!1,aspectRatio:1,highlight:!1,background:!1,center:!1,guides:!1,crop:function(){e.getCroppedCanvas().toBlob((function(e){o(e)}))}})}),[e.src]);var x=function(){var t=Object(u.a)(i.a.mark((function t(){var n,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("image",s),o(null),t.prev=3,t.next=6,y.a.post("".concat("http://www.polepath.com/api","/users/changeavatar"),n);case 6:200===(l=t.sent).status&&(a(Object(b.H)(l.data.photoURL)),e.close()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a(me.E({message:t.t0.response.data.message,variant:"error"}));case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(c.Fragment,null,r.a.createElement(v.a,{className:"text-center"},"Crop your photo"),r.a.createElement(p.a,{className:t.cropContainer},r.a.createElement("img",{src:e.src,ref:f,alt:"Crop Area",className:"max-h-full max-w-full block"})),r.a.createElement(te.a,{className:"flex justify-end"},r.a.createElement(d.a,{color:"primary",disabled:!s,type:"button",onClick:x},"Save"),r.a.createElement(d.a,{color:"primary",type:"button",onClick:e.close},"Cancel")))},ie=Object(S.a)((function(e){var a;return{dialogPaper:(a={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minHeight:"85vh",maxHeight:"85vh",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(l.a)(a,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(l.a)(a,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(l.a)(a,e.breakpoints.up("lg"),{minWidth:"30vw"}),a),placeholder:{width:"100%",height:"320px",padding:0,display:"flex",justifyContent:"center",alignItems:"center"},button:{color:e.palette.primary}}})),ue=function(e){var a=ie(),t=Object(c.useState)(""),l=Object(n.a)(t,2),m=l[0],s=l[1],o=Object(c.useState)(!1),i=Object(n.a)(o,2),u=i[0],b=i[1],E=function(){s(""),b(!1),e.close()};return r.a.createElement(f.a,{open:e.open,onClose:E},r.a.createElement(p.a,{className:a.dialogPaper},u?r.a.createElement(oe,{src:m,close:E}):r.a.createElement(c.Fragment,null,r.a.createElement(v.a,{className:"text-center"},"Update profile picture"),r.a.createElement(X.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),r.a.createElement(le.a,{className:"w-full text-left",htmlFor:"photoUpload"},"Choose your photo:"),r.a.createElement(ne.a,{id:"photoUpload",className:"mb-20 w-full",type:"file",variant:"outlined",onChange:function(e){e.target.files&&s(URL.createObjectURL(e.target.files[0]))}}),r.a.createElement(X.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),r.a.createElement(p.a,{className:Object(V.default)(a.placeholder,!m&&"border-dashed border-2 border-gray-200")},m?r.a.createElement("img",{src:m,alt:"Preview Image",className:"max-h-full max-w-full block"}):r.a.createElement("div",null,"Preview"))," ",r.a.createElement(te.a,{className:"flex justify-end"},r.a.createElement(d.a,{color:"primary",disabled:!m,type:"button",onClick:function(){return b(!0)}},"Next"),r.a.createElement(d.a,{color:"primary",type:"button",onClick:E},"Cancel")))))},de=Object(S.a)((function(e){return{layoutHeader:Object(l.a)({height:320,minHeight:320},e.breakpoints.down("md"),{height:240,minHeight:240}),avatar:{cursor:"pointer"},input:{width:"95%",marginTop:"1em",paddingBottom:"1em"},alert:{width:"100%",position:"absolute",zIndex:10,top:0,left:0,color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"},snackbar:{zIndex:15},card:{marginTop:"30px"}}}));a.default=Object(E.a)(null,(function(e){return Object(j.c)({showMessage:b.F,hideMessage:b.o},e)}))((function(e){var a=de(),t=Object(c.useState)(0),l=Object(n.a)(t,2),m=l[0],o=(l[1],Object(c.useState)(!1)),i=Object(n.a)(o,2),u=i[0],d=i[1],p=Object(c.useState)(!1),f=Object(n.a)(p,2),b=f[0],v=f[1],x=Object(c.useState)(0),h=Object(n.a)(x,2),N=h[0],g=h[1],y=(Object(c.useRef)(!1),Object(E.c)((function(e){return e.auth.user}))),j=Object(E.c)((function(e){return e.moves.progress}));return Object(c.useEffect)((function(){if(j){var e=j.data.filter((function(e){return!0===e.mastered}));g(e.length)}}),[j]),r.a.createElement(k.a,{classes:{header:a.layoutHeader,toolbar:"px-16 sm:px-24"},header:r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"p-24 flex flex-1 flex-col items-center justify-center md:flex-row md:items-end"},r.a.createElement("div",{className:"flex flex-1 flex-col items-center justify-center md:flex-row md:items-center md:justify-start"},r.a.createElement(O.a,{animation:"transition.expandIn",delay:300},r.a.createElement(C.a,{className:"mb-16 w-96 h-96 ".concat(a.avatar),src:"https://polepath.b-cdn.net/users/".concat(y._id,"/profilepics/").concat(y.profilePic),onClick:function(){v(!0)}})),r.a.createElement(O.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(I.a,{className:"md:mx-24",variant:"h4",color:"inherit"},y.stageName,r.a.createElement(s.a,{className:"ml-8 cursor-pointer",fontSize:"small",onClick:function(){return d(!0)}})))))),content:r.a.createElement("div",{className:"p-16 sm:p-24"},r.a.createElement(ue,{action:"confirm",open:b,close:function(){return v(!1)},user:y}),r.a.createElement(w,{action:"confirm",open:u,close:function(){return d(!1)}}),1===m&&r.a.createElement(J,null),2===m&&r.a.createElement(_,null),r.a.createElement("div",{className:"flex justify-between "},r.a.createElement(Q,{count:N,label:"Moves Mastered"}),r.a.createElement(Q,{count:j.data.length,label:"Moves Started"})),r.a.createElement(ae,null)," ")})}))}}]);