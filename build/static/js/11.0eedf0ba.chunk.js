(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[11],{1102:function(e,a,t){"use strict";t.r(a);var n=t(19),l=t(31),c=t(0),r=t.n(c),s=t(997),m=t.n(s),o=t(190),i=t.n(o),u=t(270),d=t(976),p=t(966),f=t(956),b=t(21),E=t(8),v=(t(149),t(979)),x=t(96),h=t.n(x),N=t(191),g=t(54),y=t.n(g);function j(e){var a=Object(E.b)(),t=Object(c.useState)(""),l=Object(n.a)(t,2),s=(l[0],l[1]),m=function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.post("".concat("http://www.polepath.com/api","/users/changestagename"),{stageName:n.stageName});case 3:200===t.sent.status&&(a(b.E({message:"Stage name change successful. Well done ".concat(n.stageName),autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"})),e.close()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),409===t.t0.response.status&&(s(t.t0.response.data.message),a(b.E({message:t.t0.response.data.message,autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"})));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(c.Fragment,null,r.a.createElement(f.a,{className:"flex flex-col align-center",open:e.open,onClose:e.close,"aria-labelledby":"form-dialog-title"},r.a.createElement(v.a,{id:"form-dialog-title"},"Change your stage name"),r.a.createElement(h.a,{onValidSubmit:m,className:"px-16 pb-16 flex flex-col justify-center w-full items-center"},r.a.createElement(N.c,{className:"my-16",type:"text",name:"stageName",label:"Your new stagename",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,value:""}),r.a.createElement(p.a,{className:"flex justify-end"},r.a.createElement(d.a,{onClick:e.close,variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(d.a,{type:"submit",variant:"contained",color:"secondary"},"Submit")))))}var w=t(20),O=t(53),k=t(192),C=t(165),S=t(985),I=t(957),M=t(155),U=t(344),W=t(964),L=t(977),z=t(978),D=t(952),H=t(900),R=t(954),Y=t(902),B=t(1097),F=t(969),A=t(965);var G=function(){var e=Object(c.useState)(null),a=Object(n.a)(e,2),t=a[0],l=a[1];if(Object(c.useEffect)((function(){y.a.get("/api/profile/about").then((function(e){l(e.data)}))}),[]),!t)return null;var s=t.general,m=t.work,o=t.contact,i=t.groups,u=t.friends;return r.a.createElement("div",{className:"md:flex max-w-2xl"},r.a.createElement("div",{className:"flex flex-col flex-1 md:ltr:pr-32 md:rtl:pl-32"},r.a.createElement(U.a,{enter:{animation:"transition.slideUpBigIn"}},r.a.createElement(L.a,{className:"w-full mb-16"},r.a.createElement(W.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(M.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"General Information"))),r.a.createElement(z.a,null,r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Gender"),r.a.createElement(M.a,null,s.gender)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Birthday"),r.a.createElement(M.a,null,s.birthday)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Locations"),s.locations.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(M.a,null,e),r.a.createElement(D.a,{className:"text-16 mx-4",color:"action"},"location_on"))}))),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"About Me"),r.a.createElement(M.a,null,s.about)))),r.a.createElement(L.a,{className:"w-full mb-16"},r.a.createElement(W.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(M.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Work"))),r.a.createElement(z.a,null,r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Occupation"),r.a.createElement(M.a,null,m.occupation)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Skills"),r.a.createElement(M.a,null,m.skills)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Jobs"),r.a.createElement("table",{className:""},r.a.createElement("tbody",null,m.jobs.map((function(e){return r.a.createElement("tr",{key:e.company},r.a.createElement("td",null,r.a.createElement(M.a,null,e.company)),r.a.createElement("td",{className:"px-16"},r.a.createElement(M.a,{color:"textSecondary"},e.date)))}))))))),r.a.createElement(L.a,{className:"w-full mb-16"},r.a.createElement(W.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(M.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Contact"))),r.a.createElement(z.a,null,r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Address"),r.a.createElement(M.a,null,o.address)),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Tel."),o.tel.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(M.a,null,e))}))),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Website"),o.websites.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(M.a,null,e))}))),r.a.createElement("div",{className:"mb-24"},r.a.createElement(M.a,{className:"font-bold mb-4 text-15"},"Emails"),o.emails.map((function(e){return r.a.createElement("div",{className:"flex items-center",key:e},r.a.createElement(M.a,null,e))}))))))),r.a.createElement("div",{className:"flex flex-col md:w-320"},r.a.createElement(U.a,{enter:{animation:"transition.slideUpBigIn"}},r.a.createElement(L.a,{className:"w-full mb-16"},r.a.createElement(W.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(M.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Friends"),r.a.createElement(d.a,{className:"normal-case",color:"inherit",size:"small"},"See 454 more"))),r.a.createElement(z.a,{className:"flex flex-wrap p-8"},u.map((function(e){return r.a.createElement("img",{key:e.id,className:"w-64 m-4 rounded-4 block",src:e.avatar,alt:e.name})})))),r.a.createElement(L.a,{className:"w-full mb-16"},r.a.createElement(W.a,{position:"static",elevation:0},r.a.createElement(A.a,{className:"px-8"},r.a.createElement(M.a,{variant:"subtitle1",color:"inherit",className:"flex-1 px-12"},"Joined Groups"),r.a.createElement(d.a,{className:"normal-case",color:"inherit",size:"small"},"See 6 more"))),r.a.createElement(z.a,{className:"p-0"},r.a.createElement(R.a,{className:"p-0"},i.map((function(e){return r.a.createElement(Y.a,{key:e.id,className:"px-8"},r.a.createElement(S.a,{className:"mx-8",alt:e.name},e.name[0]),r.a.createElement(F.a,{primary:r.a.createElement("div",{className:"flex"},r.a.createElement(M.a,{className:"font-medium",color:"secondary",paragraph:!1},e.name),r.a.createElement(M.a,{className:"mx-4",paragraph:!1},e.category)),secondary:e.members}),r.a.createElement(B.a,null,r.a.createElement(H.a,null,r.a.createElement(D.a,null,"more_vert"))))}))))))))},J=t(1098),P=t(1099),T=t(1100),_=t(971);var q=function(){var e=Object(c.useState)(null),a=Object(n.a)(e,2),t=a[0],l=a[1];return Object(c.useEffect)((function(){y.a.get("/api/profile/photos-videos").then((function(e){l(e.data)}))}),[]),t?r.a.createElement("div",{className:"md:flex max-w-2xl"},r.a.createElement("div",{className:"flex flex-col flex-1 md:ltr:pr-32 md:rtl:pl-32"},r.a.createElement(U.a,{enter:{animation:"transition.slideUpBigIn"}},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"mb-48"},r.a.createElement(_.a,{component:"div",className:"flex items-center px-0 mb-24"},r.a.createElement(M.a,{variant:"h6"},e.name),r.a.createElement(M.a,{className:"mx-16",variant:"subtitle1",color:"textSecondary"},e.info)),r.a.createElement(J.a,{className:"",spacing:8,cols:0},e.media.map((function(e){return r.a.createElement(P.a,{classes:{root:"w-full sm:w-1/2 md:w-1/4",tile:"rounded-8"},key:e.preview},r.a.createElement("img",{src:e.preview,alt:e.title}),r.a.createElement(T.a,{title:e.title,actionIcon:r.a.createElement(H.a,null,r.a.createElement(D.a,{className:"text-white opacity-75"},"info"))}))}))))}))))):null},V=t(185),K=t(3),Q=Object(I.a)((function(e){return{counter:{color:e.palette.primary.main}}}));var X=r.a.memo((function(e){var a=Q();return r.a.createElement(V.a,{className:"w-full rounded-8 shadow-none border-1 mx-8"},r.a.createElement("div",{className:"text-center pt-6 pb-6"},r.a.createElement(M.a,{className:Object(K.default)(a.counter,"text-72 leading-none ")},e.count)),r.a.createElement("div",{className:"flex items-center px-16 h-52 border-t-1"},r.a.createElement(M.a,{className:"text-15 flex w-full",color:"textSecondary"},r.a.createElement("span",{className:"truncate"},e.label))))})),Z=t(972),$=t(301),ee=t.n($),ae=t(91),te=function(e){var a=Object(ae.g)(),t=Object(c.useState)(!0),l=Object(n.a)(t,2),s=(l[0],l[1],Object(c.useState)(null)),m=Object(n.a)(s,2),o=m[0],i=m[1];return Object(c.useEffect)((function(){y.a.get("".concat("http://www.polepath.com/api","/users/history")).then((function(e){i(e.data.history)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",{className:"flex flex-col justify-center items-center mx-8 mt-20 border-1  rounded-8 "},r.a.createElement(M.a,{variant:"h6",className:"mb-16"},"Latest Activity"),o&&o.map((function(e,t){var n;switch(e.type){case"photo":n="You added a new  ".concat(e.name," ").concat(e.type,".");break;case"mastered":n="Congratulations! You mastered the ".concat(e.name," move.");break;case"started":n="You started to learn the ".concat(e.name," move. Good luck!")}return r.a.createElement("div",{key:e._id,className:"flex justify-center mb-8 w-full flex-col border-0 bg-gray-100 cursor-pointer",onClick:function(){return function(e){var t="/moves/polemoves/".concat(e);a.push(t)}(e.polemoveRef)}},r.a.createElement(M.a,{className:"mb-16 pl-16",variant:"subtitle1"},n)," ",r.a.createElement(M.a,{variant:"caption",display:"block",gutterBottom:!0,className:"text-right pr-8"},ee()(e.createdAt).format("dddd, MMMM Do YYYY, h:mm:ss a")),t!==o.length-1&&r.a.createElement(Z.a,{light:!0}))})))},ne=t(980),le=t(899),ce=t(910),re=t(1082),se=t.n(re),me=(t(1083),t(43)),oe=Object(I.a)((function(e){return{cropContainer:{width:"100%",height:"400px",padding:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}}})),ie=function(e){var a=Object(E.b)(),t=oe(),l=Object(c.useState)(null),s=Object(n.a)(l,2),m=s[0],o=s[1],f=Object(c.useRef)(null);Object(c.useEffect)((function(){if(f.current)var e=new se.a(f.current,{viewMode:2,zoomable:!1,scalable:!1,aspectRatio:1,highlight:!1,background:!1,center:!1,guides:!1,crop:function(){e.getCroppedCanvas().toBlob((function(e){o(e)}))}})}),[e.src]);var x=function(){var t=Object(u.a)(i.a.mark((function t(){var n,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("image",m),t.prev=2,t.next=5,y.a.post("".concat("http://www.polepath.com/api","/users/changeavatar"),n);case 5:200===(l=t.sent).status&&(a(Object(me.o)(l.data.photoURL)),e.close()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a(b.E({message:t.t0.response.data.message,variant:"error"}));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(c.Fragment,null,r.a.createElement(v.a,{className:"text-center"},"Crop your photo"),r.a.createElement(p.a,{className:t.cropContainer},r.a.createElement("img",{src:e.src,ref:f,alt:"Crop Area",className:"max-h-full max-w-full block"})),r.a.createElement(ne.a,{className:"flex justify-end"},r.a.createElement(d.a,{color:"primary",type:"button",onClick:x},"Save"),r.a.createElement(d.a,{color:"primary",type:"button",onClick:e.close},"Cancel")))},ue=Object(I.a)((function(e){var a;return{dialogPaper:(a={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minHeight:"85vh",maxHeight:"85vh",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(l.a)(a,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(l.a)(a,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(l.a)(a,e.breakpoints.up("lg"),{minWidth:"30vw"}),a),placeholder:{width:"100%",height:"320px",padding:0,display:"flex",justifyContent:"center",alignItems:"center"},button:{color:e.palette.primary}}})),de=function(e){var a=ue(),t=Object(c.useState)(""),l=Object(n.a)(t,2),s=l[0],m=l[1],o=Object(c.useState)(!1),i=Object(n.a)(o,2),u=i[0],b=i[1],E=function(){m(""),b(!1),e.close()};return r.a.createElement(f.a,{open:e.open,onClose:E},r.a.createElement(p.a,{className:a.dialogPaper},u?r.a.createElement(ie,{src:s,close:E}):r.a.createElement(c.Fragment,null,r.a.createElement(v.a,{className:"text-center"},"Update profile picture"),r.a.createElement(Z.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),r.a.createElement(ce.a,{className:"w-full text-left",htmlFor:"photoUpload"},"Choose your photo:"),r.a.createElement(le.a,{id:"photoUpload",className:"mb-20 w-full",type:"file",variant:"outlined",onChange:function(e){e.target.files&&m(URL.createObjectURL(e.target.files[0]))}}),r.a.createElement(Z.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),r.a.createElement(p.a,{className:Object(K.default)(a.placeholder,!s&&"border-dashed border-2 border-gray-200")},s?r.a.createElement("img",{src:s,alt:"Preview Image",className:"max-h-full max-w-full block"}):r.a.createElement("div",null,"Preview"))," ",r.a.createElement(ne.a,{className:"flex justify-end"},r.a.createElement(d.a,{color:"primary",disabled:!s,type:"button",onClick:function(){return b(!0)}},"Next"),r.a.createElement(d.a,{color:"primary",type:"button",onClick:E},"Cancel")))))},pe=Object(I.a)((function(e){return{layoutHeader:Object(l.a)({height:320,minHeight:320},e.breakpoints.down("md"),{height:240,minHeight:240}),avatar:{cursor:"pointer"},input:{width:"95%",marginTop:"1em",paddingBottom:"1em"},alert:{width:"100%",position:"absolute",zIndex:10,top:0,left:0,color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"},snackbar:{zIndex:15},card:{marginTop:"30px"}}}));a.default=Object(E.a)(null,(function(e){return Object(O.c)({showMessage:w.j,hideMessage:w.b},e)}))((function(e){var a=pe(),t=Object(c.useState)(0),l=Object(n.a)(t,2),s=l[0],o=(l[1],Object(c.useState)(!1)),i=Object(n.a)(o,2),u=(i[0],i[1],Object(c.useState)(!1)),d=Object(n.a)(u,2),p=d[0],f=d[1],b=Object(c.useState)(!1),v=Object(n.a)(b,2),x=v[0],h=v[1],N=Object(c.useState)({started:0,mastered:0}),g=Object(n.a)(N,2),y=g[0],w=g[1],O=Object(c.useState)(!1),I=Object(n.a)(O,2),U=(I[0],I[1],Object(c.useState)(!1)),W=Object(n.a)(U,2),L=(W[0],W[1],Object(c.useRef)(!1),Object(E.c)((function(e){return e.auth.user}))),z=Object(E.c)((function(e){return e.moves.moves.data}));return Object(c.useEffect)((function(){if(z){var e=z.filter((function(e){return e.userData&&e.userData.mastered})).length,a=z.filter((function(e){return e.userData})).length;w({started:a,mastered:e})}}),[z]),r.a.createElement(C.a,{classes:{header:a.layoutHeader,toolbar:"px-16 sm:px-24"},header:r.a.createElement(c.Fragment,null,r.a.createElement("div",{className:"p-24 flex flex-1 flex-col items-center justify-center md:flex-row md:items-end"},r.a.createElement("div",{className:"flex flex-1 flex-col items-center justify-center md:flex-row md:items-center md:justify-start"},r.a.createElement(k.a,{animation:"transition.expandIn",delay:300},r.a.createElement(S.a,{className:"mb-16 w-96 h-96 ".concat(a.avatar),src:L.photoURL,onClick:function(){h(!0)}})),r.a.createElement(k.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(M.a,{className:"md:mx-24",variant:"h4",color:"inherit"},L.stageName,r.a.createElement(m.a,{className:"ml-8",fontSize:"small",onClick:function(){return f(!0)}})))))),content:r.a.createElement("div",{className:"p-16 sm:p-24"},r.a.createElement(de,{action:"confirm",open:x,close:function(){return h(!1)},user:L}),r.a.createElement(j,{action:"confirm",open:p,close:function(){return f(!1)}}),1===s&&r.a.createElement(G,null),2===s&&r.a.createElement(q,null),r.a.createElement("div",{className:"flex justify-between "},z&&r.a.createElement(X,{count:y.mastered,label:"Moves Mastered"}),z&&r.a.createElement(X,{count:y.started,label:"Moves Started"})),r.a.createElement(te,null)," ")})}))}}]);