(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[10],{1103:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a(165),l=a(0),o=a.n(l),c=a(960),s=a(979),i=a(981),m=a(969),u=a(155),d=a(344),p=a(8),f=a(343),b=(a(1024),a(30)),h=a(191),g=a.n(h),E=a(271),v=a(1025),x=a.n(v),y=a(959),j=(a(1032),a(957)),O=a(905),N=a(972),w=a(42),C=a(975),k=a(967),I=a(968),S=a(903),P=a(1005),R=a.n(P),B=a(911),F=a(980),_=a(1033),T=a(3),M=a(1034),W=a.n(M),D=a(1035),U=a.n(D),A=a(1036),H=a.n(A),L=Object(c.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},media:{height:0,paddingTop:"56.25%",marginTop:"30"},cardHeader:{display:"flex",justifyContent:"center"},imgContainer:{maxHeight:"80vh",display:"flex",justifyContent:"center",width:"100%"}}})),z=o.a.forwardRef((function(e,t){return o.a.createElement(B.a,Object.assign({direction:"up",ref:t},e))}));function V(e){var t=L(),a=o.a.useState(!1),r=Object(n.a)(a,2),c=(r[0],r[1],Object(l.useState)(null)),s=Object(n.a)(c,2),i=s[0],d=s[1],f=Object(p.c)((function(e){return e.movesReducer.move}));Object(l.useEffect)((function(){d(e.startIndex)}),[]);var b=function(){e.changeStartIndex(i),e.close()};return o.a.createElement("div",null,o.a.createElement(y.a,{className:"h-full",fullScreen:!0,open:e.open,onClose:b,TransitionComponent:z},o.a.createElement(k.a,{className:t.appBar},o.a.createElement(I.a,null,o.a.createElement(S.a,{edge:"start",color:"inherit",onClick:b,"aria-label":"close"},o.a.createElement(R.a,null)),o.a.createElement(u.a,{variant:"h6",className:t.title},"Gallery"))),null!==i&&o.a.createElement(F.a,{className:"text-center"},o.a.createElement(_.a,{title:"".concat(f.generalData.name," Progress")}),o.a.createElement(C.a,null),o.a.createElement(u.a,{variant:"h6",className:Object(T.default)(t.title,"flex justify-between py-8 mx-48")},e.images[i].description,o.a.createElement("div",null," ",o.a.createElement(W.a,{className:"cursor-pointer",onClick:function(){return e.deletePhoto(i)}}))),o.a.createElement(m.a,null," ",o.a.createElement(U.a,{onClick:function(){d(0===i?e.images.length-1:function(e){return e-1})}}),o.a.createElement(H.a,{onClick:function(){i===e.images.length-1?d(0):d((function(e){return e+1}))}})),o.a.createElement(m.a,{className:t.imgContainer},o.a.createElement("img",{TransitionComponent:z,className:"p-8",src:e.images[i].original,alt:e.images[i].description})))))}var Y=a(120),G=Object(c.a)((function(e){return{thumbnail:{height:"80px",width:"30%"},currentPhoto:{maxWidth:"100%",maxHeight:"100%"},gallery:{display:"flex",justifyContent:"center",height:"350px"},listItem:{cursor:"pointer","&:hover":{background:"transparent"}},loader:{margin:"0 20px"}}})),J=function(e){var t=Object(p.b)(),a=G(e),r=Object(l.useRef)(null),c=Object(p.c)((function(e){return e.movesReducer.move.userMoveData.photos})),s=Object(l.useState)(!1),i=Object(n.a)(s,2),m=i[0],u=i[1],d=Object(l.useState)(!1),f=Object(n.a)(d,2),h=f[0],v=f[1],C=Object(l.useState)(!1),k=Object(n.a)(C,2),I=(k[0],k[1]),S=Object(l.useState)([]),P=Object(n.a)(S,2),R=P[0],B=P[1],F=Object(l.useState)(0),_=Object(n.a)(F,2),T=_[0],M=_[1],W=function(){var e=Object(E.a)(g.a.mark((function e(a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=R[a]._id,r=R.filter((function(e){return e._id!==n})),B(r),v(!1),e.next=6,t(w.deleteProgressPhoto(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();y.a,a.dialog,j.a,O.a,N.a,O.a,a.listItem,N.a;return Object(l.useEffect)((function(){if(I(!0),u(!0),c.length>0){var e=c.map((function(e){return{original:e.path,thumbnail:e.path,originalClass:a.currentPhoto,thumbnailClass:a.thumbnail,description:e.date,_id:e._id}}));B(e)}u(!1)}),[]),o.a.createElement(l.Fragment,null,h?o.a.createElement(V,{changeStartIndex:function(e){M(e)},images:R,startIndex:r.current.state.currentIndex,deletePhoto:W,open:h,close:function(){return v(!1)}}):"",m?o.a.createElement("div",{className:"flex justify-center px-20"},o.a.createElement(Y.a,{className:a.loader,text:"Uploading your photo..."})):o.a.createElement(x.a,Object(b.a)({showFullscreenButton:!1,showPlayButton:!1,startIndex:T,ref:r,className:a.gallery,onClick:function(){v(!0)},items:R,slideOnThumbnailOver:!0},"className","mb-25")))},q=a(186),K=a(1037),Q=a.n(K),X=a(95),Z=a.n(X),$=a(982),ee=a(964),te=a(986),ae=a(192),ne=Object(c.a)((function(e){var t;return{dialogPaper:(t={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(b.a)(t,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(b.a)(t,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(b.a)(t,e.breakpoints.up("lg"),{minWidth:"30vw"}),t),placeholder:{width:"100%",height:"320px",padding:0,display:"flex",justifyContent:"center",alignItems:"center"},button:{color:e.palette.primary}}})),re=function(e){var t=Object(p.b)(),a=ne(),r=Object(l.useState)(""),c=Object(n.a)(r,2),i=c[0],d=(c[1],Object(l.useState)(!0)),f=Object(n.a)(d,2),b=f[0],h=f[1],v=Object(l.useState)(new Date),x=Object(n.a)(v,2),j=x[0],O=x[1],N=Object(l.useState)(!1),k=Object(n.a)(N,2),I=(k[0],k[1]),S=function(){var a=Object(E.a)(g.a.mark((function a(n,r){var l;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(l=new FormData).append("image",e.blob),l.append("polemoveId",e.polemoveId),l.append("date",j),l.append("privacy","public"),l.append("category","photo"),I(!0),a.next=9,t(w.addProgressPhoto(l));case 9:h(!0),O(new Date),I(!1),e.close();case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement(y.a,{open:e.open,onClose:e.close},o.a.createElement(m.a,{className:a.dialogPaper},o.a.createElement(l.Fragment,null,o.a.createElement($.a,{className:"text-center"},"Upload new photo"),o.a.createElement(C.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),o.a.createElement(m.a,{className:Object(T.default)(a.placeholder,!i&&"border-dashed border-2 border-gray-200")},o.a.createElement("img",{src:e.preview,alt:"Preview Image",className:"max-h-full max-w-full block"})),o.a.createElement(Z.a,{onValidSubmit:S,className:"flex flex-col justify-center w-full"}," ",o.a.createElement(u.a,{className:"my-8",variant:"h5",component:"h5"},"Was this photo taken today?"),o.a.createElement(ae.a,{name:"date",className:"z-1"},o.a.createElement(ee.a,{onClick:function(){return h(!0)},value:"today",control:o.a.createElement(te.a,{checked:b,color:"primary"}),label:"Today"}),o.a.createElement(ee.a,{onClick:function(){return h(!1)},value:"earlier",control:o.a.createElement(te.a,{checked:!b,color:"primary"}),label:"Earlier"})),b?"":o.a.createElement(Q.a,{className:"z-10 p-8 mb-8 border-solid border-1 border-gray-600",selected:j,onChange:function(e){return O(e.getTime())}})," ",o.a.createElement(s.a,{color:"primary",type:"submit"},"Save"),o.a.createElement(s.a,{color:"primary",type:"button",onClick:e.close},"Cancel")))))},le=Object(c.a)((function(e){return{placeholder:{width:"100%",height:"100px",padding:0,display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed lightgrey",textAlign:"center",backgroundColor:e.palette.secondary.main,fontStyle:"italic",cursor:"pointer"}}})),oe=Object(f.a)("movesReducer",d.a)((function(e){var t=Object(p.c)((function(e){return e.movesReducer.move})),a=le(),r=Object(l.useState)(null),c=Object(n.a)(r,2),d=c[0],f=c[1],b=Object(l.useState)(""),h=Object(n.a)(b,2),g=h[0],E=h[1],v=Object(l.useState)(!1),x=Object(n.a)(v,2),y=x[0],j=(x[1],Object(l.useState)(!1)),O=Object(n.a)(j,2),N=O[0],w=O[1],C=Object(l.useRef)(null),k=function(){C.current.click()};return o.a.createElement(q.a,{className:"lg:w-1/2 mb-16"},o.a.createElement(i.a,{className:"flex justify-center flex-col align-center p-16"},o.a.createElement(u.a,{className:"underline flex justify-start mb-16",variant:"h5",component:"h5"},"Your progress"),t.photos.length>0&&!y?o.a.createElement(l.Fragment,null,o.a.createElement(J,{photos:t.photos,polemoveId:e.polemoveId}),o.a.createElement(m.a,{className:"pt-10 px-0"},o.a.createElement(s.a,{type:"button",className:"w-full",variant:"contained",color:"secondary",onClick:k},"Upload photo"))):o.a.createElement(m.a,{onClick:k,className:a.placeholder}," ","No photos yet :( Click here to add your first one!"),y&&o.a.createElement("div",{className:"flex justify-center px-20"},o.a.createElement(Y.a,{text:"Uploading your photo..."})),o.a.createElement("input",{type:"file",ref:C,hidden:!0,onChange:function(e){if(e.target.files){var t=e.target.files[0];f(URL.createObjectURL(e.target.files[0])),E(t),w(!0)}}}),d&&o.a.createElement(re,{open:N,preview:d,close:function(){return f(null),E(null),void w(!1)},blob:g,polemoveId:e.polemoveId})))})),ce=a(983);function se(e){return o.a.createElement("div",null,o.a.createElement(y.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},e.children,o.a.createElement(ce.a,null,o.a.createElement(s.a,{onClick:e.onClose,color:"primary"},"Cancel"),o.a.createElement(s.a,{onClick:e.confirmHandler,color:"primary",autoFocus:!0},"confirm"===e.action?"Confirm":"Refresh"))))}var ie=a(978),me=a(1080),ue=a.n(me),de=Object(c.a)((function(e){return{deleteNoteButton:{padding:"0.5rem"}}})),pe=function(e){var t=Object(p.b)(),a=Object(p.c)((function(e){return e.movesReducer.move.notes})),n=de(e),r=Object(l.useRef)(null);return o.a.createElement(q.a,{className:"flex flex-col mb-16 items-start justify-between p-16 lg:w-1/2 lg:flex-1 "},o.a.createElement(u.a,{className:"underline mt-8",variant:"h5",component:"h5"},"Your Notes"),a?o.a.createElement(j.a,{className:"flex flex-col flex-1 justify-start items-start"},a.map((function(t){return o.a.createElement(O.a,{variant:"outlined",className:"text-base",key:t._id},o.a.createElement(ie.a,null,o.a.createElement(ue.a,null)),t.text,o.a.createElement("button",{className:n.deleteNoteButton,id:t._id},o.a.createElement(R.a,{id:t._id,onClick:function(){return e.toggleModal(t._id,"deleteNote")}})))}))):null,o.a.createElement(Z.a,{onValidSubmit:function(a,n){var r={polemoveId:e.polemoveId,note:a.note};t(w.addMoveNote(r)),n()},ref:r,className:"flex flex-col justify-center w-full"},o.a.createElement(u.a,{className:"mt-8 mb-8",variant:"h6",component:"h6"},"New note"),o.a.createElement(ae.c,{className:"mb-16",type:"text",name:"note",label:"Type your note here",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,rows:4,value:""}),o.a.createElement(s.a,{type:"submit",variant:"contained",color:"secondary"},"Add note")))},fe=Object(c.a)((function(e){return{progressButton:{display:"flex",width:"33%"},selectedButton:{display:"flex",width:"33%",backgroundColor:e.palette.primary.main,color:"#FFF"}}})),be=function(e){Object(p.b)();var t=fe(e);return o.a.createElement(m.a,{className:"flex justify-between my-10 p-0"},o.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){return e.toggleModal(null,"resetProgress")},className:void 0===e.mastered||null===e.mastered?t.selectedButton:t.progressButton},"ONE DAY"),o.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleUserProgressChange(!1)},className:!1===e.mastered?t.selectedButton:t.progressButton},"IN PROGRESS"),o.a.createElement(s.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleUserProgressChange(!0)},name:"mastered",className:e.mastered?t.selectedButton:t.progressButton},"MASTERED"))},he=a(177),ge=a(955),Ee=a(48),ve=a(24),xe=a(1081),ye=a(1095),je=Object(c.a)((function(e){return{stepLabel:{cursor:"pointer!important"},successFab:{background:"".concat(he.a[500],"!important"),color:"white!important"},noborder:{border:"0"},selectedButton:{backgroundColor:e.palette.primary.main,color:"#FFF"},deleteNoteButton:{padding:"0.5rem"},dropzone:{border:"1px solid #121212",padding:"15px"},spinner:{minHeight:"80px",minWidth:"80px"},spinnerContainer:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},photoPlaceholder:{display:"flex",justifyContent:"center",alignItems:"center",flex:"1",margin:"16px",height:"80%"}}}));t.default=Object(f.a)("movesReducer",d.a)((function(e){var t=Object(p.b)(),a=Object(p.c)((function(e){return e.movesReducer.move})),c=Object(p.c)((function(e){return e.movesReducer.moves.data})),s=Object(l.useState)(!1),i=Object(n.a)(s,2),d=i[0],f=i[1],b=Object(l.useState)(null),h=Object(n.a)(b,2),g=h[0],E=h[1],v=Object(l.useState)(null),x=Object(n.a)(v,2),y=x[0],j=x[1],O=Object(l.useState)(!0),N=Object(n.a)(O,2),C=(N[0],N[1]),k=Object(Ee.a)(),I=je(e);Object(l.useRef)(null),Object(l.useEffect)((function(){if(c){var a=c.find((function(t){return t._id===e.match.params.polemoveId}));console.log("FOUND current MOVE AND THIS WORKS :)))",a),t(w.setMove(a))}}),[c]),Object(l.useEffect)((function(){a&&C(!1)}),[a]);var P=function(e,t){j(t),null!==e&&E(e),f(!0)},R=function(e){e!==a.mastered&&(null===e?(console.log("dispatching resetProgress"),t(w.resetProgress(a._id))):null===a.mastered||void 0===a.mastered?(console.log("dispatching startprogress..."),t(w.startProgress(a._id,e))):(console.log("dispatching updateprogress..."),t(w.updateProgress(a._id,e))),f(!1),j(null))},B="deleteNote"===y?o.a.createElement(l.Fragment,null,o.a.createElement($.a,{id:"alert-dialog-title"},"Are you sure you want to delete note?"),o.a.createElement(xe.a,null,o.a.createElement(ye.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))):o.a.createElement(l.Fragment,null,o.a.createElement($.a,{id:"alert-dialog-title"},"Are you sure you want to reset your progress on ",a&&a.name,"?"),o.a.createElement(xe.a,null,o.a.createElement(ye.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))),F=o.a.createElement(q.a,{className:Object(T.default)(I.photoPlaceholder,"mb-16 lg:w-1/2")},o.a.createElement(u.a,{variant:"h6"},"This move doesn't have a main photo yet."));return o.a.createElement(r.a,{classes:{content:"flex flex-col flex-auto overflow-hidden",header:"h-72 min-h-72"},header:o.a.createElement("div",{className:"flex flex-1 items-center px-16 lg:px-24"},o.a.createElement(S.a,{to:"/moves/polemoves",component:ve.a},o.a.createElement(ge.a,null,"ltr"===k.direction?"arrow_back":"arrow_forward")),a&&o.a.createElement(u.a,{className:"flex-1 text-20 mx-16 lg:text-center"},a.name)),content:a?o.a.createElement("div",{className:"flex flex-col w-full p-16 lg:mt-24 lg:flex-row lg:flex-wrap overflow-scroll"},null===a.extension?F:o.a.createElement(q.a,{className:"p-5 mb-5 lg:w-1/2"},o.a.createElement("img",{className:"block w-full h-full",alt:a.name,src:"https://polepath.b-cdn.net/mainphotos/".concat(a._id,".").concat(a.extension)})),o.a.createElement(m.a,{className:"lg:w-1/2 mb-16 p-0 flex flex-col justify-between"},o.a.createElement(be,{handleUserProgressChange:R,toggleModal:P,mastered:a&&a.mastered,polemoveId:e.match.params.polemoveId}),a.otherNames.length?o.a.createElement(u.a,{className:"text-justify mb-16",variant:"body2",component:"p"},o.a.createElement("em",{className:"text-xl"}," ","Also known as:",a&&a.otherNames.map((function(e,t){return t===a.otherNames.length-1?o.a.createElement("span",{key:e}," ",e," "):o.a.createElement("span",{key:e},e,", ")})))):""," ",o.a.createElement(q.a,{className:"flex-1 p-16  flex justify-center items-center"},o.a.createElement("em",{className:"text-base lg:text-xl"},a.description?a.description:"This move does not have a description yet.")),o.a.createElement(q.a,{className:"flex-1 p-16  mt-16 flex justify-center items-center"},o.a.createElement("em",{className:"text-base lg:text-xl"},"Public userphotos are coming soon!"))),a&&null!==a.mastered?o.a.createElement(oe,{polemoveId:e.match.params.polemoveId,moveName:a.name,photos:a&&a.photos}):null,a&&null!==a.mastered?o.a.createElement(pe,{toggleModal:P,polemoveId:e.match.params.polemoveId}):""," ",o.a.createElement(se,{action:"confirm",open:d,onClose:function(){f(!1),j(null)},confirmHandler:"deleteNote"===y?function(){var e={noteId:g,polemoveId:a._id};t(w.deleteMoveNote(e)),E(null),f(!1),j(null)}:function(){return R(null)}},B)):o.a.createElement(Y.a,null)})}))}}]);