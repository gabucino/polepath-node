/*! For license information please see 9.94f03705.chunk.js.LICENSE.txt */
(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[9],{1198:function(e,t,r){"use strict";r.r(t);var n=r(168),a=r(19),o=r(164),i=r(133),c=r(1199),l=r(1196),s=r(1053),u=r(1007),m=r(47),f=r(184),p=r(0),h=r.n(p),d=r(9),v=r(23),g=r(14),y=r(185),b=r(1056),E=r(1020),w=r(1019),x=r(1078),j=r(1057),O=r(1107);function N(e){return h.a.createElement(j.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"sm"},e.children,h.a.createElement(O.a,null,h.a.createElement(x.a,{onClick:e.onClose,color:"primary"},"Cancel"),h.a.createElement(x.a,{onClick:e.confirmHandler,color:"primary",autoFocus:!0},"confirm"===e.action?"Confirm":"Refresh")))}var k=r(1004),L=r(1017),_=r(1067),I=r(1108),D=r(1194),C=r(1099),S=function(e){var t=Object(d.b)(),r=Object(p.useState)(!1),n=Object(a.a)(r,2),o=n[0],i=n[1],c=Object(d.c)((function(e){return e.auth.user.role}));Object(p.useEffect)((function(){console.log(Object.entries(e.currentMove.progressData).length)}),[e.currentMove.progressData]);return h.a.createElement(p.Fragment,null,h.a.createElement("div",{className:"flex flex-col w-full p-16 lg:mt-24 lg:flex-row lg:items-between lg:px-0 lg:flex-wrap overflow-scroll"},h.a.createElement(y.a,{className:"lg:p-8 mb-5 lg:w-1/2"},h.a.createElement("img",{className:"m-5 block w-full h-full",alt:e.currentMove.moveData.name,src:"https://polepath.b-cdn.net/mainphotos/".concat(e.currentMove.moveData._id,".").concat(e.currentMove.moveData.extension)})),h.a.createElement(_.a,{className:"lg:w-1/2 mb-16 p-0 flex flex-col justify-between"},c.length?h.a.createElement(k.a,{className:"flex w-full sm:w-320 my-16",variant:"outlined"},h.a.createElement(L.a,{htmlFor:"current-progress"},"Current progress "),h.a.createElement(w.a,{value:0===Object.keys(e.currentMove.progressData).length?"oneday":e.currentMove.progressData.mastered?"mastered":"inprogress",onChange:function(r){console.log(r.target.value);var n=0===Object.keys(e.currentMove.progressData).length?"oneday":e.currentMove.progressData.mastered?"mastered":"inprogress";console.log(n),n!==r.target.value&&("oneday"===r.target.value&&(console.log("defo should enter here"),i(!0)),e.currentMove.progressData.progressId&&"oneday"!==r.target.value?t(g.L(e.currentMove.progressData.progressId,"mastered"===r.target.value)):e.currentMove.progressData.progressId||"oneday"===r.target.value||t(g.J(e.currentMove.moveData._id,"mastered"===r.target.value)))},input:h.a.createElement(E.a,{name:"current-progress",id:"current-progress"})},h.a.createElement(b.a,{value:"oneday"},"One day..."),h.a.createElement(b.a,{value:"inprogress"},"In progress"),h.a.createElement(b.a,{value:"mastered"},"Mastered"))):h.a.createElement(x.a,{className:"mb-16 mt-16",variant:"contained",color:"primary",to:"/users/new",component:v.a},"Sign up to start tracking your progress"),e.currentMove.moveData.otherNames.length?h.a.createElement(f.a,{className:"text-justify mb-16",variant:"body2",component:"p"},h.a.createElement("em",{className:"text-xl"}," ","Also known as:",e.currentMove&&e.currentMove.moveData.otherNames.map((function(t,r){return r===e.currentMove.moveData.otherNames.length-1?h.a.createElement("span",{key:t}," ",t," "):h.a.createElement("span",{key:t},t,", ")})))):""," ",h.a.createElement(_.a,{className:"flex-1 p-16  flex justify-center items-center"},h.a.createElement("em",{className:"text-base lg:text-xl"},e.currentMove.moveData.description?e.currentMove.moveData.description:"This move doesn't have a description yet :(")),h.a.createElement(_.a,{className:"flex-1 p-16  mt-16 flex justify-center items-center"},h.a.createElement("em",{className:"text-base lg:text-xl"},"Public userphotos are coming soon!"))),o&&h.a.createElement(N,{action:"confirm",open:o,onClose:function(){return i(!1)},confirmHandler:function(){t(g.B(e.currentMove.progressData.progressId)),i(!1)}},h.a.createElement(p.Fragment,null,h.a.createElement(C.a,{id:"alert-dialog-title"},"Are you sure you want to reset your progress on ",e.currentMove.moveData.name,"?"),h.a.createElement(I.a,null,h.a.createElement(D.a,{id:"alert-dialog-description"},"If you reset your progress, all your notes and photos will be deleted permanently."))))))},M=r(43),P=r(1058),F=(r(1126),r(270)),T=r(1127),G=r.n(T),W=(r(1128),r(1075)),R=r(1065),A=r(1066),H=r(1109),Y=r.n(H),B=r(1015),U=r(1080),J=r(1195),V=r(3),z=r(1129),K=r.n(z),q=r(1130),Q=r.n(q),X=r(1131),Z=r.n(X),$=Object(P.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},media:{height:0,paddingTop:"56.25%",marginTop:"30"},cardHeader:{display:"flex",justifyContent:"center"},imgContainer:{maxHeight:"80vh",display:"flex",justifyContent:"center",width:"100%"}}})),ee=h.a.forwardRef((function(e,t){return h.a.createElement(B.a,Object.assign({direction:"up",ref:t},e))}));function te(e){var t=$(),r=Object(p.useState)(null),n=Object(a.a)(r,2),o=n[0],i=n[1];Object(p.useEffect)((function(){i(e.startIndex)}),[e.startIndex]);var c=function(){e.changeStartIndex(o),e.close()};return h.a.createElement("div",null,h.a.createElement(j.a,{className:"h-full",fullScreen:!0,open:e.open,onClose:c,TransitionComponent:ee},h.a.createElement(R.a,{className:t.appBar},h.a.createElement(A.a,null,h.a.createElement(u.a,{edge:"start",color:"inherit",onClick:c,"aria-label":"close"},h.a.createElement(Y.a,null)),h.a.createElement(f.a,{variant:"h6",className:t.title},"Gallery"))),null!==o&&h.a.createElement(U.a,{className:"text-center"},h.a.createElement(J.a,{title:"".concat(e.moveName," Progress")}),h.a.createElement(W.a,null),h.a.createElement(f.a,{variant:"h6",className:Object(V.a)(t.title,"flex justify-between py-8 mx-48")},e.images[o].description,h.a.createElement("div",null," ",h.a.createElement(K.a,{className:"cursor-pointer",onClick:function(){return e.deletePhoto(o)}}))),h.a.createElement(_.a,null," ",h.a.createElement(Q.a,{style:{cursor:e.images.length>1?"pointer":"not-allowed"},color:e.images.length>1?"":"disabled",onClick:function(){i(0===o?e.images.length-1:function(e){return e-1})}}),h.a.createElement(Z.a,{style:{cursor:e.images.length>1?"pointer":"not-allowed"},color:e.images.length>1?"":"disabled",onClick:function(){o===e.images.length-1?i(0):i((function(e){return e+1}))}})),h.a.createElement(_.a,{className:t.imgContainer},h.a.createElement("img",{className:"p-8",src:e.images[o].original,alt:e.images[o].description})))))}var re=r(273),ne=r.n(re);function ae(){ae=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var h={};c(h,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(O([])));v&&v!==t&&r.call(v,a)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,c(g,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var oe=Object(P.a)((function(e){return{thumbnail:{height:"80px",width:"30%"},currentPhoto:{maxWidth:"100%",maxHeight:"100%"},gallery:{display:"flex",justifyContent:"center",height:"350px"},listItem:{cursor:"pointer","&:hover":{background:"transparent"}},loader:{margin:"0 20px"}}})),ie=function(e){var t=Object(d.b)(),r=Object(d.c)((function(e){return e.auth.user._id})),n=Object(d.c)((function(e){return e.moves.move})),o=oe(e),c=Object(p.useRef)(null),l=Object(p.useState)(!1),s=Object(a.a)(l,2),u=s[0],m=s[1],f=Object(p.useState)(!1),v=Object(a.a)(f,2),y=v[0],b=v[1],E=Object(p.useState)(!1),w=Object(a.a)(E,2),x=w[0],j=w[1],O=Object(p.useState)([]),N=Object(a.a)(O,2),k=N[0],L=N[1],_=Object(p.useState)(0),I=Object(a.a)(_,2),D=I[0],C=I[1],S=function(){var e=Object(F.a)(ae().mark((function e(r){var a,o;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k[r]._id,o=k.filter((function(e){return e._id!==a})),L(o),b(!1),e.next=6,t(g.o(n.progressData.progressId,a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){if(m(!0),e.photos.length>0){var t=e.photos.map((function(e){return{original:"https://polepath.b-cdn.net/users/".concat(r,"/").concat(e.moveRef,"/").concat(e._id,".").concat(e.extension),thumbnail:"https://polepath.b-cdn.net/users/".concat(r,"/").concat(e.moveRef,"/").concat(e._id,".").concat(e.extension),originalClass:o.currentPhoto,thumbnailClass:o.thumbnail,description:ne()(e.date).format("D MMMM YYYY"),_id:e._id}}));L(t)}m(!1),j(!0)}),[r,e.photos,o.currentPhoto,o.thumbnail]),h.a.createElement(p.Fragment,null,y?h.a.createElement(te,{changeStartIndex:function(e){C(e)},moveName:n.moveData.name,images:k,startIndex:c.current.state.currentIndex,deletePhoto:S,open:y,close:function(){return b(!1)}}):"",u&&x?h.a.createElement("div",{className:"flex justify-center px-20"},h.a.createElement(i.a,{className:o.loader,text:"Uploading your photo..."})):h.a.createElement(G.a,{showFullscreenButton:!1,showPlayButton:!1,startIndex:D,ref:c,className:o.gallery,onClick:function(){b(!0)},items:k,slideOnThumbnailOver:!0}))},ce=r(1132),le=r.n(ce),se=r(94),ue=r.n(se),me=r(1062),fe=r(1083),pe=r(187);function he(){he=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===u)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,i),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var h={};c(h,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(O([])));v&&v!==t&&r.call(v,a)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,c(g,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var de=Object(P.a)((function(e){var t;return{dialogPaper:(t={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(M.a)(t,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(M.a)(t,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(M.a)(t,e.breakpoints.up("lg"),{minWidth:"30vw"}),t),placeholder:{width:"100%",height:"320px",padding:0,display:"flex",justifyContent:"center",alignItems:"center"},button:{color:e.palette.primary}}})),ve=function(e){var t=Object(d.b)(),r=de(),n=Object(d.c)((function(e){return e.moves.move})),o=Object(p.useState)(!1),i=Object(a.a)(o,2),c=i[0],l=i[1],s=Object(p.useState)(new Date),u=Object(a.a)(s,2),m=u[0],v=u[1],y=Object(p.useState)(!1),b=Object(a.a)(y,2),E=b[0],w=b[1],O=function(){var r=Object(F.a)(he().mark((function r(a,o){var i;return he().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("LOOOK AT THIS FUCKEEEEEEER"),(i=new FormData).append("image",e.blob),i.append("polemoveId",n.moveData._id),i.append("progressId",n.progressData.progressId),i.append("date",m),i.append("privacy","public"),i.append("category","photo"),console.log(i),w(!0),r.next=12,t(g.h(i));case 12:l(!1),v(new Date),w(!1),e.close();case 16:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return h.a.createElement(j.a,{open:e.open,onClose:e.close},h.a.createElement(_.a,{className:r.dialogPaper},h.a.createElement(p.Fragment,null,h.a.createElement(C.a,{className:"text-center"},"Upload new photo"),h.a.createElement(W.a,{color:"primary",className:"mb-10 w-full",variant:"middle"}),h.a.createElement(_.a,{className:Object(V.a)(r.placeholder,!e.preview&&"border-dashed border-2 border-gray-200")},h.a.createElement("img",{src:e.preview,alt:"preview",className:"max-h-full max-w-full block"})),h.a.createElement(ue.a,{onValidSubmit:O,className:"flex flex-col justify-center w-full"}," ",h.a.createElement(f.a,{className:"my-8",variant:"h5",component:"h5"},"When did you take that photo?"),h.a.createElement(pe.a,{name:"date",className:"z-1"},h.a.createElement(me.a,{onClick:function(){return l(!1)},value:"today",control:h.a.createElement(fe.a,{checked:!c,color:"primary"}),label:"Today"}),h.a.createElement(me.a,{onClick:function(){return l(!0)},value:"earlier",control:h.a.createElement(fe.a,{checked:c,color:"primary"}),label:"Previously, just uploading now"})),c?h.a.createElement(le.a,{className:"z-10 p-8 mb-8 border-solid border-1 border-gray-600",selected:m,fixedHeight:!0,onChange:function(e){return v(e.getTime())},maxDate:new Date}):""," ",h.a.createElement(x.a,{disabled:E,color:"primary",type:"submit"},"Save"),h.a.createElement(x.a,{color:"primary",type:"button",onClick:e.close},"Cancel")))))},ge=Object(P.a)((function(e){return{container:Object(M.a)({},e.breakpoints.up("sm"),{maxWidth:"50vw",minWidth:"50vw"})}})),ye=function(e){var t=ge(),r=Object(p.useState)(null),n=Object(a.a)(r,2),o=n[0],i=n[1],c=Object(p.useState)(""),l=Object(a.a)(c,2),s=l[0],u=l[1],m=Object(p.useState)(!1),d=Object(a.a)(m,2),v=d[0],g=d[1],b=Object(p.useRef)(null),E=function(){b.current.click()};return h.a.createElement(y.a,{className:t.container},h.a.createElement(_.a,{className:"flex justify-center flex-col items-center p-16"},h.a.createElement(f.a,{className:"underline flex justify-start mb-16",variant:"h5",component:"h5"},"Your progress"),e.photos&&e.photos.length>0?h.a.createElement(p.Fragment,null,h.a.createElement(ie,{photos:e.photos,polemoveId:e.polemoveId}),h.a.createElement(_.a,{className:"pt-10 px-0"},h.a.createElement(x.a,{type:"button",className:"w-full",variant:"contained",color:"secondary",onClick:E},"Upload photo"))):h.a.createElement(p.Fragment,null," ",h.a.createElement(f.a,{variant:"h6",component:"h6"},"Nothing here yet :("," "),h.a.createElement(x.a,{variant:"contained",color:"primary",onClick:E},"Start uploading!")),h.a.createElement("input",{type:"file",ref:b,hidden:!0,onChange:function(e){if(console.log(e.target),e.target.files){var t=e.target.files[0];i(URL.createObjectURL(e.target.files[0])),u(t),g(!0)}}}),o&&h.a.createElement(ve,{open:v,preview:o,close:function(){return i(null),u(null),void g(!1)},blob:s,polemoveId:e.polemoveId})))},be=r(1055),Ee=r(1009),we=r(1077),xe=r(1175),je=r.n(xe),Oe=r(1105),Ne=r.n(Oe),ke=function(e){return h.a.createElement(ue.a,{onValidSubmit:e.noteSubmitHandler,className:"flex flex-col justify-center w-full"},h.a.createElement(f.a,{className:"mt-8 mb-8",variant:"h6",component:"h6"},"New note"),h.a.createElement(pe.c,{className:"mb-16",type:"text",name:"text",label:"Type your note here",multiline:!0,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},variant:"outlined",required:!0,rows:4,value:""}),h.a.createElement(x.a,{type:"submit",variant:"contained",color:"secondary",disabled:!e.progressId},"Add note"))},Le=r(1061),_e=Object(P.a)((function(e){return{deleteNoteButton:{padding:"0 1rem"},container:Object(M.a)({},e.breakpoints.up("sm"),{maxWidth:"50vw",minWidth:"50vw"}),listItem:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-start","&:hover":{background:e.palette.secondary.main,cursor:"pointer"}}}})),Ie=function(e){var t=Object(d.b)(),r=Object(d.c)((function(e){return e.moves.move.progressData.notes})),n=_e(e),o=Object(p.useState)({delete:!1}),i=Object(a.a)(o,2),c=i[0],l=i[1],s=Object(p.useState)(!1),u=Object(a.a)(s,2),m=u[0],v=u[1];return h.a.createElement(y.a,{className:Object(V.a)(n.container,"flex flex-col mb-16 items-start justify-between p-16 lg:flex-grow-0 lg:flex-1 ")},h.a.createElement(f.a,{className:"underline mt-8",variant:"h5",component:"h5"},"Your Notes"),r?h.a.createElement(be.a,{className:"flex flex-col w-full justify-between items-start"},r.map((function(e){return h.a.createElement(Ee.a,{variant:"outlined",className:n.listItem,key:e._id?e._id:"0"},h.a.createElement(we.a,null,h.a.createElement(je.a,null)),h.a.createElement("div",{className:"w-full flex justify-start"},h.a.createElement(f.a,{style:{wordBreak:"break-all",whiteSpace:"pre-line"},variant:"body1"},e.text," ")),e._id?h.a.createElement("button",{className:n.deleteNoteButton,id:e._id},h.a.createElement(Y.a,{onClick:function(){return l({delete:!0,id:e._id,text:e.text})}})):h.a.createElement(Le.a,null))}))):null,h.a.createElement(x.a,{color:"primary",startIcon:h.a.createElement(Ne.a,null),onClick:function(){v(!0)}},"ADD NOTE"),m&&h.a.createElement(ke,{progressId:e.progressId,noteSubmitHandler:function(r,n){var a={polemoveId:e.polemoveId,progressId:e.progressId,text:r.text,timestamp:Date.now()};t(g.g(a)),n(),v(!1)}}),c.delete&&h.a.createElement(N,{action:"confirm",open:c.delete,onClose:function(){return l({delete:!1})},confirmHandler:function(){var r={noteId:c.id,progressId:e.progressId};t(g.n(r)),l({delete:!1})}},h.a.createElement(p.Fragment,null,h.a.createElement(C.a,{id:"alert-dialog-title"},"Delete note?"),h.a.createElement(I.a,null,h.a.createElement("div",{className:"p-16 mb-16 bg-gray-300"},h.a.createElement(D.a,{id:"alert-dialog-description"},h.a.createElement("i",{className:"break-all whitespace-pre-line"},'"'.concat(c.text.length>300?c.text.substring(0,300)+"...":c.text,'"'))," ")),h.a.createElement(D.a,{id:"alert-dialog-description"},"No takebacksies... ")))))};t.default=function(e){var t=Object(d.b)(),r=Object(d.c)((function(e){return e.moves.move})),y=Object(d.c)((function(e){return e.moves.progress.data})),b=Object(d.c)((function(e){return e.moves.moves.data})),E=Object(p.useState)(0),w=Object(a.a)(E,2),x=w[0],j=w[1],O=Object(m.a)();return Object(p.useEffect)((function(){if(b){if(!r.moveData.name){var a=b.find((function(t){return t._id===e.match.params.polemoveId}));t(g.E(a))}var o=y.find((function(e){return e.moveRef===r.moveData._id}));if(o){o.moveRef,o._id;var i=Object(n.a)(o,["moveRef","_id"]);i.progressId=o._id,t(g.F(i))}else t(g.A())}}),[r.moveData.name,r.moveData._id,t,e.match.params.polemoveId,y,b]),Object(p.useEffect)((function(){return function(){t(g.k())}}),[t]),h.a.createElement(o.a,{classes:{content:"flex flex-col flex-auto overflow-hidden",header:"h-72 min-h-72"},header:h.a.createElement("div",{className:"flex flex-1 items-center px-16 lg:px-24"},h.a.createElement(u.a,{to:"/moves/polemoves",component:v.a},h.a.createElement(s.a,null,"ltr"===O.direction?"arrow_back":"arrow_forward")),r&&h.a.createElement(f.a,{className:"flex-1 text-20 mx-16 lg:text-center"},r.moveData.name)),contentToolbar:h.a.createElement(c.a,{value:x,onChange:function(e,t){console.log(t),j(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"off",classes:{root:"h-64 w-full border-b-1"}},h.a.createElement(l.a,{classes:{root:"h-64"},label:"Info"}),h.a.createElement(l.a,{classes:{root:"h-64"},disabled:!Object.keys(r.progressData).length,label:"Photos & Videos"}),h.a.createElement(l.a,{classes:{root:"h-64"},disabled:!Object.keys(r.progressData).length,label:"Notes"})),content:r.moveData.name?h.a.createElement("div",{className:"w-full flex justify-center"},0===x&&h.a.createElement(S,{currentMove:r}),1===x&&h.a.createElement(ye,{photos:r.progressData.media,currentMove:r}),2===x&&h.a.createElement(Ie,{notes:r.progressData.notes,progressId:r.progressData.progressId})):h.a.createElement(i.a,null)})}}}]);