(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[10],{1088:function(e,t,a){"use strict";a.r(t);var n=a(21),c=a(45),r=a(0),l=a.n(r),o=a(1067),i=a.n(o),s=a(187),u=a.n(s),m=a(263),f=a(962),d=a(953),p=a(943),b=a(14),v=a(9),h=a(983),g=a(95),j=a.n(g),E=a(183);function x(e){var t=Object(v.b)(),a=Object(r.useState)(!1),c=Object(n.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)(!1),g=Object(n.a)(s,2),x=g[0],O=g[1],y=Object(v.c)((function(e){return e.auth.user.stageName})),w=function(){var e=Object(m.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),t(b.L(a.stageName));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o&&(i(!1),e.close())}),[y,e]),l.a.createElement(r.Fragment,null,l.a.createElement(p.a,{className:"flex flex-col align-center",open:e.open,onClose:e.close,"aria-labelledby":"form-dialog-title"},l.a.createElement(h.a,{id:"form-dialog-title"},"Change your stage name"),l.a.createElement(j.a,{onValidSubmit:w,onValid:function(){return O(!0)},onInvalid:function(){return O(!1)},className:"px-16 pb-16 flex flex-col justify-center w-full items-center"},l.a.createElement(E.c,{className:"my-16",type:"text",name:"stageName",label:"Your new stagename",multiline:!0,validations:{minLength:3},validationErrors:{minLength:"Minimum character length is 3"},variant:"outlined",required:!0,value:""}),l.a.createElement(d.a,{className:"flex justify-end"},l.a.createElement(f.a,{onClick:e.close,variant:"contained",color:"secondary"},"Cancel"),l.a.createElement(f.a,{type:"submit",variant:"contained",color:"secondary",disabled:o||!x},"Submit")))))}var O=a(188),y=a(162),w=a(970),N=a(944),C=a(181),k=a(942),S=a(940),I=a(1065),L=a.n(I),M=(a(1066),a(991)),Y=a(42),H=a.n(Y),W=(a(13),Object(N.a)((function(e){var t;return{cropContainer:{width:"100%",height:"400px",padding:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},dialogPaper:(t={margin:0,display:"flex",flexDirection:"column",alignItems:"center",padding:"10 auto",minHeight:"85vh",maxHeight:"85vh",minWidth:"82vw",maxWidth:"85vw",justifyContent:"space-evenly"},Object(c.a)(t,e.breakpoints.up("sm"),{minWidth:"70vw",maxWidth:"70vw"}),Object(c.a)(t,e.breakpoints.up("md"),{minWidth:"55vw",maxWidth:"55vw"}),Object(c.a)(t,e.breakpoints.up("lg"),{minWidth:"30vw"}),t)}}))),R=function(e){var t=Object(v.b)(),a=W(),c=Object(r.useState)(null),o=Object(n.a)(c,2),i=o[0],s=o[1],g=Object(r.useState)(!1),j=Object(n.a)(g,2),E=j[0],x=j[1],O=Object(v.c)((function(e){return e.auth.user.photoURL})),y=Object(r.useRef)(null);Object(r.useEffect)((function(){if(E)var e=new L.a(y.current,{viewMode:2,zoomable:!1,scalable:!1,aspectRatio:1,highlight:!1,background:!1,center:!1,guides:!1,crop:function(){e.getCroppedCanvas().toBlob((function(e){s(e)}))}})}),[e.src,E]),Object(r.useEffect)((function(){E&&e.close()}),[e,O]),Object(r.useEffect)((function(){x(!0)}),[]);var w=function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(null),(a=new FormData).append("image",i),t(Object(b.J)(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(p.a,{open:e.open,onClose:e.close},l.a.createElement(d.a,{className:a.dialogPaper},l.a.createElement(h.a,{className:"text-center"},"Crop your photo"),l.a.createElement(d.a,{className:a.cropContainer},l.a.createElement("img",{src:e.src,ref:y,alt:"Crop Area",className:"max-h-full max-w-full block"})),l.a.createElement(M.a,{className:"flex justify-end"},l.a.createElement(f.a,{color:"primary",disabled:!i,type:"button",onClick:w},"Save"),l.a.createElement(f.a,{color:"primary",type:"button",onClick:e.close},"Cancel"))))},U=a(182),z=a(3),B=Object(N.a)((function(e){return{counter:{color:e.palette.primary.main}}}));var D=l.a.memo((function(e){var t=B();return l.a.createElement(U.a,{className:"w-full rounded-8 shadow-none border-1 mx-8"},l.a.createElement("div",{className:"text-center pt-6 pb-6"},l.a.createElement(C.a,{className:Object(z.default)(t.counter,"text-72 leading-none ")},e.count)),l.a.createElement("div",{className:"flex items-center px-16 h-52 border-t-1"},l.a.createElement(C.a,{className:"text-15 flex w-full",color:"textSecondary"},l.a.createElement("span",{className:"truncate"},e.label))))})),P=a(947),A=a(959),F=a(266),J=a.n(F),T=a(90),V=Object(N.a)((function(e){return{activityContainer:{padding:0,margin:0,minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),_=function(e){var t=V(e),a=Object(T.g)(),c=Object(r.useState)(null),o=Object(n.a)(c,2),i=o[0],s=o[1],u=Object(r.useState)(!1),m=Object(n.a)(u,2),f=m[0],p=m[1],b=Object(r.useState)(!0),v=Object(n.a)(b,2),h=v[0],g=v[1];Object(r.useEffect)((function(){var e=H.a.CancelToken.source();return H.a.get("".concat("http://www.polepath.com/api","/users/history"),{cancelToken:e.token}).then((function(e){var t=e.data.activity.reverse();s(t),g(!1)})).catch((function(e){p(!0)})),function(){e.cancel("Component got unmounted")}}),[]);var j=l.a.createElement(C.a,{variant:"h6",className:"mb-16"},"Couldn't load latest activity :(");return l.a.createElement("div",{className:"flex flex-col justify-center items-center mx-8 mt-20 border-1 p-0 rounded-8 "},l.a.createElement(C.a,{variant:"h6",className:"mb-16"},"Latest Activity"),l.a.createElement(d.a,{className:t.activityContainer},h?l.a.createElement(P.a,null):f?j:i.map((function(e,t){var n;switch(e.event){case"photo":n="You added a new  ".concat(e.polemoveId.name," ").concat(e.event,".");break;case"mastered":n="Congratulations! You mastered the ".concat(e.polemoveId.name," move.");break;case"started":n="You started to learn the ".concat(e.polemoveId.name," move. Good luck!");break;default:return!0}return l.a.createElement("div",{key:e._id,className:"flex justify-center mb-8 w-full flex-col border-0 bg-gray-100 cursor-pointer",onClick:function(){return function(e){var t="/moves/polemoves/".concat(e);a.push(t)}(e.polemoveId._id)}},l.a.createElement(C.a,{className:"mb-16 pl-16",variant:"subtitle1"},n)," ",l.a.createElement(C.a,{variant:"caption",display:"block",gutterBottom:!0,className:"text-right pr-8"},J()(e.createdAt).format("dddd, MMMM Do YYYY, h:mm:ss a")),t!==i.length-1&&l.a.createElement(A.a,{light:!0}))}))))},q=Object(N.a)((function(e){return{layoutHeader:Object(c.a)({height:320,minHeight:320},e.breakpoints.down("md"),{height:240,minHeight:240}),avatar:{cursor:"pointer"}}}));t.default=function(e){var t=q(),a=Object(r.useState)(!1),c=Object(n.a)(a,2),o=c[0],s=c[1],u=Object(r.useState)(null),m=Object(n.a)(u,2),f=m[0],d=m[1],p=Object(r.useState)(0),b=Object(n.a)(p,2),h=b[0],g=b[1],j=Object(r.useState)(null),E=Object(n.a)(j,2),N=E[0],I=E[1],L=Object(v.c)((function(e){return e.auth.user})),M=Object(v.c)((function(e){return e.moves.progress}));return Object(r.useEffect)((function(){if(M){var e=M.data.filter((function(e){return!0===e.mastered}));g(e.length)}}),[M]),l.a.createElement(y.a,{classes:{header:t.layoutHeader,toolbar:"px-16 sm:px-24"},header:l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:"p-24 flex flex-1 flex-col items-center justify-center md:flex-row md:items-end"},l.a.createElement("div",{className:"flex flex-1 flex-col items-center justify-center md:flex-row md:items-center md:justify-start"},l.a.createElement(O.a,{animation:"transition.expandIn",delay:300},l.a.createElement(w.a,{className:"mb-16 w-96 h-96 ".concat(t.avatar),src:L.photoURL,onClick:function(e){d(e.currentTarget)}})),l.a.createElement(O.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(C.a,{className:"md:mx-24",variant:"h4",color:"inherit"},L.stageName,l.a.createElement(i.a,{className:"ml-8 cursor-pointer",fontSize:"small",onClick:function(){return s(!0)}})))),f&&l.a.createElement(S.a,{open:Boolean(f),anchorEl:f,onClose:function(){return d(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},l.a.createElement(k.a,{role:"button",component:"label"},"Update Profile Picture"," ",l.a.createElement("input",{type:"file",onChange:function(e){e.target.files&&I(URL.createObjectURL(e.target.files[0]))},style:{display:"none"}}))))),content:l.a.createElement("div",{className:"p-16 sm:p-24"},l.a.createElement(x,{action:"confirm",open:o,close:function(){return s(!1)}}),l.a.createElement("div",{className:"flex justify-between "},l.a.createElement(D,{count:h,label:"Moves Mastered"}),l.a.createElement(D,{count:M.data.length,label:"Moves Started"})),l.a.createElement(_,null)," ",N&&l.a.createElement(R,{open:Boolean(N),src:N,close:function(){return I(null)}}))})}}}]);